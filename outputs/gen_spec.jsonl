{"scenario": "SurveyMonkey Apply", "api_spec": {"api_groups": [{"group_name": "Programs", "endpoints": [{"path": "/api/programs", "method": "POST", "summary": "Create a new program for the current user", "description": "Create a new entry in the programs table using the current user as owner", "operation_id": "create_program", "tags": ["programs"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Display name of the program", "example": "STEM Scholars Grant"}, "description": {"type": "string", "param_type": "body", "required": false, "description": "Short summary of the program's purpose", "example": "Supports undergraduate research projects in STEM fields"}, "default_time_zone": {"type": "string", "param_type": "body", "required": true, "description": "IANA time zone for this program", "example": "America/New_York"}}, "response": {"id": {"type": "integer", "description": "Program unique ID", "example": 10}, "name": {"type": "string", "description": "Program name", "example": "STEM Scholars Grant"}, "description": {"type": "string", "description": "Program description", "example": "Supports undergraduate research projects in STEM fields"}, "default_time_zone": {"type": "string", "description": "Time zone for all related cycles", "example": "America/New_York"}, "owner_user_id": {"type": "integer", "description": "ID of the user who owns this program", "example": 1}, "created_at": {"type": "string", "description": "Program creation timestamp (ISO 8601)", "example": "2026-01-15T09:30:00Z"}}, "required_tables": ["programs"], "required_fields": {"programs": ["id", "name", "description", "default_time_zone", "owner_user_id", "created_at"]}}, {"path": "/api/programs", "method": "GET", "summary": "List all programs owned by the current user", "description": "Retrieve all programs where owner_user_id matches authenticated user", "operation_id": "list_programs_by_user", "tags": ["programs"], "request_params": {}, "response": {"programs": {"type": "array", "items": {"id": {"type": "integer", "description": "Program unique ID", "example": 10}, "name": {"type": "string", "description": "Program name", "example": "STEM Scholars Grant"}, "description": {"type": "string", "description": "Program description", "example": "Supports undergraduate research projects in STEM fields"}, "default_time_zone": {"type": "string", "description": "Time zone for the program", "example": "America/New_York"}, "owner_user_id": {"type": "integer", "description": "ID of the owning user", "example": 1}}}}, "required_tables": ["programs"], "required_fields": {"programs": ["id", "name", "description", "default_time_zone", "owner_user_id"]}}]}, {"group_name": "Cycles", "endpoints": [{"path": "/api/cycles", "method": "POST", "summary": "Create a new application cycle for a program", "description": "Create an entry in cycles for a specified program owned by current user", "operation_id": "create_cycle", "tags": ["cycles"], "request_params": {"program_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of the parent program", "example": 10}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Cycle name (e.g., Fall 2026)", "example": "Fall 2026"}, "open_at": {"type": "string", "param_type": "body", "required": true, "description": "Opening datetime (ISO 8601)", "example": "2026-08-01T09:00:00-04:00"}, "deadline_at": {"type": "string", "param_type": "body", "required": true, "description": "Submission deadline datetime (ISO 8601)", "example": "2026-10-01T17:00:00-04:00"}, "late_until_at": {"type": "string", "param_type": "body", "required": false, "description": "Datetime for late submission cutoff (ISO 8601, nullable)", "example": "2026-10-08T17:00:00-04:00"}}, "response": {"id": {"type": "integer", "description": "Cycle unique ID", "example": 50}, "program_id": {"type": "integer", "description": "Parent program ID", "example": 10}, "name": {"type": "string", "description": "Cycle name", "example": "Fall 2026"}, "open_at": {"type": "string", "description": "Cycle opening date/time (ISO 8601)", "example": "2026-08-01T09:00:00-04:00"}, "deadline_at": {"type": "string", "description": "Cycle deadline date/time (ISO 8601)", "example": "2026-10-01T17:00:00-04:00"}, "late_until_at": {"type": "string", "description": "Late submission allowed until this date/time (ISO 8601 or null)", "example": "2026-10-08T17:00:00-04:00"}}, "required_tables": ["cycles"], "required_fields": {"cycles": ["id", "program_id", "name", "open_at", "deadline_at", "late_until_at"]}}, {"path": "/api/cycles", "method": "GET", "summary": "List all cycles for a specific program", "description": "Retrieve all application cycles for given program_id (owned by current user)", "operation_id": "list_cycles_for_program", "tags": ["cycles"], "request_params": {"program_id": {"type": "integer", "param_type": "query", "required": true, "description": "Filter cycles by parent program ID", "example": 10}}, "response": {"cycles": {"type": "array", "items": {"id": {"type": "integer", "description": "Cycle ID", "example": 50}, "name": {"type": "string", "description": "Cycle name", "example": "Fall 2026"}, "open_at": {"type": "string", "description": "Open datetime (ISO 8601)", "example": "2026-08-01T09:00:00-04:00"}, "deadline_at": {"type": "string", "description": "Deadline datetime (ISO 8601)", "example": "2026-10-01T17:00:00-04:00"}, "late_until_at": {"type": "string", "description": "Late submission allowed until this date/time (ISO 8601 or null)", "example": "2026-10-08T17:00:00-04:00"}, "program_id": {"type": "integer", "description": "Parent program ID", "example": 10}}}}, "required_tables": ["cycles"], "required_fields": {"cycles": ["id", "name", "open_at", "deadline_at", "late_until_at", "program_id"]}}]}, {"group_name": "ApplicationForms", "endpoints": [{"path": "/api/application_forms", "method": "POST", "summary": "Create an application form for a cycle", "description": "Create an application form record for the specified cycle ID", "operation_id": "create_application_form", "tags": ["application_forms"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Associated cycle ID for this form", "example": 50}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Title for the application form", "example": "STEM Fall 2026 Form"}}, "response": {"id": {"type": "integer", "description": "Form unique ID", "example": 101}, "cycle_id": {"type": "integer", "description": "Associated cycle ID", "example": 50}, "name": {"type": "string", "description": "Form name", "example": "STEM Fall 2026 Form"}}, "required_tables": ["application_forms"], "required_fields": {"application_forms": ["id", "cycle_id", "name"]}}, {"path": "/api/form_sections", "method": "POST", "summary": "Add a section to an application form", "description": "Add a new section with title and order to specified application form", "operation_id": "create_form_section", "tags": ["form_sections"], "request_params": {"form_id": {"type": "integer", "param_type": "body", "required": true, "description": "Form ID to add section to", "example": 101}, "title": {"type": "string", "param_type": "body", "required": true, "description": "Section display title for applicants", "example": "Applicant Info"}, "section_order": {"type": "integer", "param_type": "body", "required": true, "description": "Order of this section (starting at 1)", "example": 1}}, "response": {"id": {"type": "integer", "description": "Section unique ID", "example": 201}, "form_id": {"type": "integer", "description": "Associated form ID", "example": 101}, "title": {"type": "string", "description": "Section title", "example": "Applicant Info"}, "section_order": {"type": "integer", "description": "Section order in form", "example": 1}}, "required_tables": ["form_sections"], "required_fields": {"form_sections": ["id", "form_id", "title", "section_order"]}}, {"path": "/api/form_questions", "method": "POST", "summary": "Add a question to a form section", "description": "Add a new question to a specified section in a form with validation settings", "operation_id": "create_form_question", "tags": ["form_questions"], "request_params": {"section_id": {"type": "integer", "param_type": "body", "required": true, "description": "Section ID to add the question to", "example": 201}, "question_key": {"type": "string", "param_type": "body", "required": true, "description": "Stable key for programmatic use (snake_case)", "example": "full_name"}, "label": {"type": "string", "param_type": "body", "required": true, "description": "Question label shown to applicants", "example": "Full Name"}, "question_type": {"type": "string", "param_type": "body", "required": true, "description": "Type of question", "example": "text"}, "is_required": {"type": "boolean", "param_type": "body", "required": true, "description": "Whether this field must be answered", "example": true}, "max_length": {"type": "integer", "param_type": "body", "required": false, "description": "Max length for text or long_text", "example": 2000}, "min_value": {"type": "float", "param_type": "body", "required": false, "description": "Minimum value for number questions", "example": 500}, "max_value": {"type": "float", "param_type": "body", "required": false, "description": "Maximum value for number questions", "example": 5000}}, "response": {"id": {"type": "integer", "description": "Unique question ID", "example": 301}, "section_id": {"type": "integer", "description": "Section that holds this question", "example": 201}, "question_key": {"type": "string", "description": "Stable programmatic key", "example": "full_name"}, "label": {"type": "string", "description": "Question prompt", "example": "Full Name"}, "question_type": {"type": "string", "description": "Type (text, number, etc.)", "example": "text"}, "is_required": {"type": "boolean", "description": "Whether required", "example": true}}, "required_tables": ["form_questions"], "required_fields": {"form_questions": ["id", "section_id", "question_key", "label", "question_type", "is_required"]}}, {"path": "/api/form_question_options", "method": "POST", "summary": "Add an option to a dropdown question", "description": "Create a selectable option for a form question of type dropdown", "operation_id": "create_form_question_option", "tags": ["form_question_options"], "request_params": {"question_id": {"type": "integer", "param_type": "body", "required": true, "description": "Parent dropdown question ID", "example": 305}, "value": {"type": "string", "param_type": "body", "required": true, "description": "Stable internal value for the option", "example": "state_u"}, "label": {"type": "string", "param_type": "body", "required": true, "description": "Human-readable option text", "example": "State U"}, "option_order": {"type": "integer", "param_type": "body", "required": true, "description": "Display order within options list", "example": 1}}, "response": {"id": {"type": "integer", "description": "Unique option ID", "example": 500}, "question_id": {"type": "integer", "description": "ID of parent dropdown question", "example": 305}, "value": {"type": "string", "description": "Stable value", "example": "state_u"}, "label": {"type": "string", "description": "Display text", "example": "State U"}, "option_order": {"type": "integer", "description": "Order for display", "example": 1}}, "required_tables": ["form_question_options"], "required_fields": {"form_question_options": ["id", "question_id", "value", "label", "option_order"]}}]}, {"group_name": "DocumentRequirements", "endpoints": [{"path": "/api/document_requirements", "method": "POST", "summary": "Add a document requirement to an application cycle", "description": "Adds a file/document upload requirement for a specific cycle", "operation_id": "create_document_requirement", "tags": ["document_requirements"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Cycle for which the document is required", "example": 50}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Document requirement name", "example": "Unofficial Transcript"}, "is_required": {"type": "boolean", "param_type": "body", "required": true, "description": "Is upload mandatory?", "example": true}, "allowed_mime_types": {"type": "string", "param_type": "body", "required": true, "description": "Comma-separated list of allowed MIME types", "example": "application/pdf"}, "max_bytes": {"type": "integer", "param_type": "body", "required": true, "description": "Maximum file size in bytes", "example": 10485760}, "submitted_by_role": {"type": "string", "param_type": "body", "required": true, "description": "Role required for uploading (applicant or recommender)", "example": "recommender"}}, "response": {"id": {"type": "integer", "description": "Unique ID for the document requirement", "example": 1000}, "cycle_id": {"type": "integer", "description": "Associated cycle ID", "example": 50}, "name": {"type": "string", "description": "Document name", "example": "Letter of Recommendation"}}, "required_tables": ["document_requirements"], "required_fields": {"document_requirements": ["id", "cycle_id", "name"]}}]}, {"group_name": "EligibilityRules", "endpoints": [{"path": "/api/eligibility_rules", "method": "POST", "summary": "Create an eligibility rule for a cycle", "description": "Adds a new eligibility rule for a cycle, referencing a form question via field_key", "operation_id": "create_eligibility_rule", "tags": ["eligibility_rules"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Cycle ID this rule is attached to", "example": 50}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Display name for this eligibility rule", "example": "Minimum GPA"}, "field_key": {"type": "string", "param_type": "body", "required": true, "description": "Form question key (e.g., 'gpa' or 'enrollment_status')", "example": "gpa"}, "operator": {"type": "string", "param_type": "body", "required": true, "description": "Comparison operator (e.g., '<', '=', 'IN')", "example": "<"}, "value_json": {"type": "string", "param_type": "body", "required": true, "description": "JSON-encoded comparison value or values", "example": "3.2"}, "on_fail_action": {"type": "string", "param_type": "body", "required": false, "description": "Action to take if rule fails (default: mark_ineligible)", "example": "mark_ineligible"}}, "response": {"id": {"type": "integer", "description": "Eligibility rule unique ID", "example": 900}, "cycle_id": {"type": "integer", "description": "Associated cycle ID", "example": 50}, "field_key": {"type": "string", "description": "Field programmatic key", "example": "gpa"}, "operator": {"type": "string", "description": "Comparison operator", "example": "<"}, "value_json": {"type": "string", "description": "Comparison value(s) as JSON", "example": "3.2"}, "on_fail_action": {"type": "string", "description": "Action on rule failure", "example": "mark_ineligible"}}, "required_tables": ["eligibility_rules"], "required_fields": {"eligibility_rules": ["id", "cycle_id", "field_key", "operator", "value_json", "on_fail_action"]}}]}, {"group_name": "Submissions", "endpoints": [{"path": "/api/submissions", "method": "GET", "summary": "List submissions for a cycle with filters", "description": "List submissions in a cycle with optional status and date range filters", "operation_id": "list_submissions_for_cycle", "tags": ["submissions"], "request_params": {"cycle_id": {"type": "integer", "param_type": "query", "required": true, "description": "Cycle to query submissions for", "example": 50}, "status": {"type": "string", "param_type": "query", "required": false, "description": "Submission status filter", "example": "Submitted"}, "created_from": {"type": "string", "param_type": "query", "required": false, "description": "Return only submissions created at or after this date (YYYY-MM-DD)", "example": "2026-09-15"}, "created_to": {"type": "string", "param_type": "query", "required": false, "description": "Return only submissions created at or before this date (YYYY-MM-DD)", "example": "2026-09-30"}}, "response": {"submissions": {"type": "array", "items": {"id": {"type": "integer", "description": "Submission unique ID", "example": 42}, "submission_code": {"type": "string", "description": "Human-readable code", "example": "SUB-1042"}, "applicant_user_id": {"type": "integer", "description": "Applicant user ID", "example": 13}, "status": {"type": "string", "description": "Current status", "example": "Submitted"}, "created_at": {"type": "string", "description": "When submission was created (ISO 8601)", "example": "2026-09-17T16:40:00-04:00"}}}}, "required_tables": ["submissions"], "required_fields": {"submissions": ["id", "submission_code", "applicant_user_id", "status", "created_at"]}}, {"path": "/api/submissions/{submission_id}/status", "method": "PATCH", "summary": "Change a submission's status", "description": "Update the status field for a specified submission by ID", "operation_id": "update_submission_status", "tags": ["submissions"], "request_params": {"submission_id": {"type": "integer", "param_type": "path", "required": true, "description": "Submission record ID", "example": 42}, "status": {"type": "string", "param_type": "body", "required": true, "description": "New status value", "example": "In Review"}}, "response": {"id": {"type": "integer", "description": "Submission ID", "example": 42}, "submission_code": {"type": "string", "description": "Human-readable code for submission", "example": "SUB-1042"}, "status": {"type": "string", "description": "Updated status", "example": "In Review"}}, "required_tables": ["submissions"], "required_fields": {"submissions": ["id", "submission_code", "status"]}}]}, {"group_name": "Reviewers", "endpoints": [{"path": "/api/users", "method": "POST", "summary": "Create a user in the system", "description": "Create a new user with full_name, username, email, and organization", "operation_id": "create_user", "tags": ["users"], "request_params": {"username": {"type": "string", "param_type": "body", "required": true, "description": "Username/login", "example": "maya.chen"}, "email": {"type": "string", "param_type": "body", "required": true, "description": "Email address", "example": "maya.chen@example.edu"}, "full_name": {"type": "string", "param_type": "body", "required": true, "description": "Full display name", "example": "Dr. Maya Chen"}, "organization_id": {"type": "integer", "param_type": "body", "required": false, "description": "Organization ID (can be null)", "example": 2}}, "response": {"id": {"type": "integer", "description": "Unique user ID", "example": 21}, "username": {"type": "string", "description": "Username", "example": "maya.chen"}, "email": {"type": "string", "description": "Email address", "example": "maya.chen@example.edu"}, "full_name": {"type": "string", "description": "Full display name", "example": "Dr. Maya Chen"}, "organization_id": {"type": "integer", "description": "Organization ID, if any", "example": 2}}, "required_tables": ["users"], "required_fields": {"users": ["id", "username", "email", "full_name", "organization_id"]}}, {"path": "/api/reviewers", "method": "POST", "summary": "Create a reviewer from a user account", "description": "Register an existing user as a reviewer (one-to-one relation)", "operation_id": "create_reviewer", "tags": ["reviewers"], "request_params": {"user_id": {"type": "integer", "param_type": "body", "required": true, "description": "Existing user ID to mark as reviewer", "example": 21}}, "response": {"id": {"type": "integer", "description": "Reviewer ID", "example": 3}, "user_id": {"type": "integer", "description": "User account ID", "example": 21}}, "required_tables": ["reviewers"], "required_fields": {"reviewers": ["id", "user_id"]}}, {"path": "/api/review_assignments", "method": "POST", "summary": "Assign a reviewer to a submission in a cycle", "description": "Create a single review assignment connecting reviewer to a submission for a given cycle", "operation_id": "create_review_assignment", "tags": ["review_assignments"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Application cycle ID", "example": 50}, "submission_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of submission being reviewed", "example": 42}, "reviewer_id": {"type": "integer", "param_type": "body", "required": true, "description": "Reviewer ID to assign", "example": 3}}, "response": {"id": {"type": "integer", "description": "Assignment unique ID", "example": 101}, "cycle_id": {"type": "integer", "description": "Cycle of this assignment", "example": 50}, "submission_id": {"type": "integer", "description": "Submission ID", "example": 42}, "reviewer_id": {"type": "integer", "description": "Reviewer ID", "example": 3}}, "required_tables": ["review_assignments"], "required_fields": {"review_assignments": ["id", "submission_id", "reviewer_id", "cycle_id"]}}]}, {"group_name": "Rubrics", "endpoints": [{"path": "/api/rubrics", "method": "POST", "summary": "Create a new review rubric", "description": "Adds a named evaluation rubric to the system", "operation_id": "create_rubric", "tags": ["rubrics"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Unique rubric name", "example": "Research Potential v1"}, "require_overall_comment": {"type": "boolean", "param_type": "body", "required": true, "description": "Require an overall comment on each review", "example": true}}, "response": {"id": {"type": "integer", "description": "Rubric unique ID", "example": 10}, "name": {"type": "string", "description": "Rubric name", "example": "Research Potential v1"}, "require_overall_comment": {"type": "boolean", "description": "Is an overall comment required?", "example": true}}, "required_tables": ["rubrics"], "required_fields": {"rubrics": ["id", "name", "require_overall_comment"]}}, {"path": "/api/rubric_criteria", "method": "POST", "summary": "Add a criterion to a rubric", "description": "Adds a scoring criterion to a rubric with name, min, max and order", "operation_id": "create_rubric_criterion", "tags": ["rubric_criteria"], "request_params": {"rubric_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of parent rubric", "example": 10}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Criterion label", "example": "Feasibility"}, "min_score": {"type": "integer", "param_type": "body", "required": true, "description": "Minimum allowed score for this criterion", "example": 0}, "max_score": {"type": "integer", "param_type": "body", "required": true, "description": "Maximum allowed score for this criterion", "example": 5}, "criterion_order": {"type": "integer", "param_type": "body", "required": true, "description": "Display order in rubric", "example": 1}}, "response": {"id": {"type": "integer", "description": "Criterion unique ID", "example": 101}, "rubric_id": {"type": "integer", "description": "Parent rubric ID", "example": 10}, "name": {"type": "string", "description": "Criterion label", "example": "Feasibility"}, "min_score": {"type": "integer", "description": "Minimum score", "example": 0}, "max_score": {"type": "integer", "description": "Maximum score", "example": 5}, "criterion_order": {"type": "integer", "description": "Order in rubric", "example": 1}}, "required_tables": ["rubric_criteria"], "required_fields": {"rubric_criteria": ["id", "rubric_id", "name", "min_score", "max_score", "criterion_order"]}}, {"path": "/api/cycle_stages", "method": "POST", "summary": "Create a stage in an application cycle", "description": "Create a new stage for a cycle with name and order", "operation_id": "create_cycle_stage", "tags": ["cycle_stages"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Cycle to associate this stage with", "example": 50}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Stage name (e.g., Review)", "example": "Review"}, "stage_order": {"type": "integer", "param_type": "body", "required": true, "description": "Order of the stage", "example": 2}}, "response": {"id": {"type": "integer", "description": "Stage unique ID", "example": 200}, "cycle_id": {"type": "integer", "description": "Parent cycle ID", "example": 50}, "name": {"type": "string", "description": "Stage name", "example": "Review"}, "stage_order": {"type": "integer", "description": "Order in cycle process", "example": 2}}, "required_tables": ["cycle_stages"], "required_fields": {"cycle_stages": ["id", "cycle_id", "name", "stage_order"]}}, {"path": "/api/stage_rubrics", "method": "POST", "summary": "Attach a rubric to a review stage", "description": "Links a rubric to a review stage in a specific cycle", "operation_id": "create_stage_rubric", "tags": ["stage_rubrics"], "request_params": {"cycle_stage_id": {"type": "integer", "param_type": "body", "required": true, "description": "Cycle stage ID (e.g., review stage)", "example": 200}, "rubric_id": {"type": "integer", "param_type": "body", "required": true, "description": "Rubric to attach", "example": 10}}, "response": {"id": {"type": "integer", "description": "Unique stage rubric link ID", "example": 301}, "cycle_stage_id": {"type": "integer", "description": "Stage ID", "example": 200}, "rubric_id": {"type": "integer", "description": "Rubric ID", "example": 10}}, "required_tables": ["stage_rubrics"], "required_fields": {"stage_rubrics": ["id", "cycle_stage_id", "rubric_id"]}}]}, {"group_name": "Reviews", "endpoints": [{"path": "/api/reviews", "method": "POST", "summary": "Submit a review and scores for a submission", "description": "Stores review, scores for attached rubric, and conflict details for the reviewer-submission pair", "operation_id": "submit_review", "tags": ["reviews"], "request_params": {"submission_id": {"type": "integer", "param_type": "body", "required": true, "description": "Submission being reviewed", "example": 42}, "reviewer_id": {"type": "integer", "param_type": "body", "required": true, "description": "Reviewer who is scoring", "example": 3}, "rubric_id": {"type": "integer", "param_type": "body", "required": true, "description": "Rubric associated with this review", "example": 10}, "conflict_status": {"type": "string", "param_type": "body", "required": true, "description": "Conflict of interest status", "example": "None"}, "overall_comment": {"type": "string", "param_type": "body", "required": true, "description": "Comment about this submission", "example": "Strong idea; budget needs more detail"}, "scores": {"type": "array", "param_type": "body", "required": true, "description": "Scores for each criterion (criterion_id and value)", "example": [{"criterion_id": 31, "score": 4}, {"criterion_id": 32, "score": 5}, {"criterion_id": 33, "score": 3}]}}, "response": {"review_id": {"type": "integer", "description": "Review record ID", "example": 1001}, "submission_id": {"type": "integer", "description": "Submission reviewed", "example": 42}, "reviewer_id": {"type": "integer", "description": "Reviewer for this review", "example": 3}, "rubric_id": {"type": "integer", "description": "Rubric used", "example": 10}, "scores": {"type": "array", "items": {"criterion_id": {"type": "integer", "description": "Criterion scored", "example": 31}, "score": {"type": "integer", "description": "Score for this criterion", "example": 4}}}, "conflict_status": {"type": "string", "description": "Conflict status", "example": "None"}, "overall_comment": {"type": "string", "description": "Overall review comment", "example": "Strong idea; budget needs more detail"}}, "required_tables": ["reviews", "review_scores"], "required_fields": {"reviews": ["id", "submission_id", "reviewer_id", "rubric_id", "conflict_status", "overall_comment"], "review_scores": ["review_id", "criterion_id", "score"]}}]}, {"group_name": "SubmissionAdvancement", "endpoints": [{"path": "/api/submissions/{submission_id}/advance", "method": "POST", "summary": "Advance a submission to a new status", "description": "Advance a submission to a next stage (e.g., Shortlisted or Approved) by updating status", "operation_id": "advance_submission_status", "tags": ["submissions"], "request_params": {"submission_id": {"type": "integer", "param_type": "path", "required": true, "description": "Submission record ID to advance", "example": 42}, "to_status": {"type": "string", "param_type": "body", "required": true, "description": "Status to advance to", "example": "Shortlisted"}}, "response": {"id": {"type": "integer", "description": "Submission ID", "example": 42}, "submission_code": {"type": "string", "description": "Code for the submission", "example": "SUB-1042"}, "status": {"type": "string", "description": "Advanced status value", "example": "Shortlisted"}}, "required_tables": ["submissions"], "required_fields": {"submissions": ["id", "submission_code", "status"]}}]}, {"group_name": "InterviewScheduling", "endpoints": [{"path": "/api/interview_campaigns", "method": "POST", "summary": "Create an interview campaign and time window for a cycle", "description": "Begins an interview scheduling campaign for all eligible submissions in a cycle", "operation_id": "create_interview_campaign", "tags": ["interviews"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Cycle whose shortlisted applicants will be interviewed", "example": 50}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Interview campaign name", "example": "STEM Interviews Fall 2026"}, "time_zone": {"type": "string", "param_type": "body", "required": true, "description": "IANA time zone for scheduling", "example": "America/New_York"}, "slot_minutes": {"type": "integer", "param_type": "body", "required": true, "description": "Minutes for each interview slot", "example": 20}, "start_at": {"type": "string", "param_type": "body", "required": true, "description": "Scheduling window start (ISO 8601 datetime)", "example": "2026-10-20T10:00:00-04:00"}, "end_at": {"type": "string", "param_type": "body", "required": true, "description": "Scheduling window end (ISO 8601 datetime)", "example": "2026-10-20T12:00:00-04:00"}}, "response": {"id": {"type": "integer", "description": "Campaign unique ID", "example": 80}, "cycle_id": {"type": "integer", "description": "Cycle this campaign is linked to", "example": 50}, "name": {"type": "string", "description": "Campaign name", "example": "STEM Interviews Fall 2026"}}, "required_tables": ["interview_campaigns"], "required_fields": {"interview_campaigns": ["id", "cycle_id", "name"]}}, {"path": "/api/interview_slots/bulk", "method": "POST", "summary": "Bulk create time slots for an interview campaign", "description": "Creates a sequence of interview slots of equal length within a campaign window", "operation_id": "bulk_create_interview_slots", "tags": ["interviews"], "request_params": {"campaign_id": {"type": "integer", "param_type": "body", "required": true, "description": "Interview campaign ID", "example": 80}}, "response": {"slots_created": {"type": "integer", "description": "Number of interview slots made", "example": 6}, "slot_ids": {"type": "array", "items": {"type": "integer", "description": "Slot IDs created for this campaign", "example": 1200}}}, "required_tables": ["interview_slots"], "required_fields": {"interview_slots": ["id", "campaign_id", "start_at", "end_at"]}}]}, {"group_name": "Email", "endpoints": [{"path": "/api/email_templates", "method": "POST", "summary": "Create a reusable email template", "description": "Create an email template owned by the current user with subject and body", "operation_id": "create_email_template", "tags": ["email_templates"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Name/label for the template", "example": "Interview Invitation - STEM Scholars Grant"}, "subject": {"type": "string", "param_type": "body", "required": true, "description": "Template email subject line", "example": "Interview Invitation - STEM Scholars Grant"}, "body": {"type": "string", "param_type": "body", "required": true, "description": "Email message body (text or HTML)", "example": "Please select an interview time by Oct 15; replies are monitored."}}, "response": {"id": {"type": "integer", "description": "Email template ID", "example": 55}, "name": {"type": "string", "description": "Template name", "example": "Interview Invitation - STEM Scholars Grant"}}, "required_tables": ["email_templates"], "required_fields": {"email_templates": ["id", "name"]}}, {"path": "/api/email_outbox", "method": "POST", "summary": "Queue an email for a cycle or submission", "description": "Schedule automatic emails related to submissions or cycles; uses template or direct content", "operation_id": "queue_email_outbox", "tags": ["email_outbox"], "request_params": {"cycle_id": {"type": "integer", "param_type": "body", "required": false, "description": "Related cycle (null if not applicable)", "example": 50}, "submission_id": {"type": "integer", "param_type": "body", "required": false, "description": "Related submission (nullable)", "example": 42}, "recipient_email": {"type": "string", "param_type": "body", "required": true, "description": "Receiver's email address", "example": "amy.stem@example.edu"}, "subject": {"type": "string", "param_type": "body", "required": true, "description": "Subject line for the email", "example": "Interview Invitation - STEM Scholars Grant"}, "body": {"type": "string", "param_type": "body", "required": true, "description": "Body content of the email", "example": "Please select an interview time by Oct 15; replies are monitored."}}, "response": {"id": {"type": "integer", "description": "Queued email outbox record ID", "example": 800}, "status": {"type": "string", "description": "Queue status (queued/sent/failed)", "example": "queued"}}, "required_tables": ["email_outbox"], "required_fields": {"email_outbox": ["id", "status"]}}]}, {"group_name": "AwardsExport", "endpoints": [{"path": "/api/awards/export_csv", "method": "GET", "summary": "Export approved awardee data as CSV", "description": "Download a CSV file listing all approved awardees for a cycle, including key submission and award info", "operation_id": "export_awards_csv", "tags": ["awards"], "request_params": {"cycle_id": {"type": "integer", "param_type": "query", "required": true, "description": "Cycle whose awards to export", "example": 50}}, "response": {"csv_url": {"type": "string", "description": "URL to download the generated CSV file", "example": "https://apply.example.edu/exports/awards_fall2026.csv"}}, "required_tables": ["awards", "submissions", "users"], "required_fields": {"awards": ["submission_id", "award_amount", "decision_date"], "submissions": ["submission_code", "status", "applicant_user_id"], "users": ["full_name", "email"]}}]}]}}
{"scenario": "Etsy Digital Downloads", "api_spec": {"api_groups": [{"group_name": "Listings", "endpoints": [{"path": "/api/listings", "method": "POST", "summary": "Create a new digital product listing", "description": "Add a new listing to the current user's shop with product details and meta.", "operation_id": "create_listing", "tags": ["listings"], "request_params": {"title": {"type": "string", "param_type": "body", "required": true, "description": "Listing title", "example": "Minimalist Wedding Invitation Template (A5)"}, "category_id": {"type": "integer", "param_type": "body", "required": true, "description": "Category ID for the listing", "example": 4}, "sku": {"type": "string", "param_type": "body", "required": false, "description": "Unique SKU for the listing", "example": "INV-2026-001"}, "base_price_amount": {"type": "float", "param_type": "body", "required": true, "description": "Base price in USD", "example": 12.0}, "currency_code": {"type": "string", "param_type": "body", "required": false, "description": "Currency code (default USD)", "example": "USD"}, "fulfillment_type": {"type": "string", "param_type": "body", "required": true, "description": "Fulfillment type: auto/manual", "example": "auto"}, "license": {"type": "string", "param_type": "body", "required": true, "description": "Default license option (e.g. personal use)", "example": "personal use"}}, "response": {"id": {"type": "integer", "description": "Listing ID", "example": 6732}, "shop_id": {"type": "integer", "description": "Shop ID", "example": 120}, "title": {"type": "string", "description": "Listing title", "example": "Minimalist Wedding Invitation Template (A5)"}, "sku": {"type": "string", "description": "Listing SKU", "example": "INV-2026-001"}, "category_id": {"type": "integer", "description": "Category ID", "example": 4}, "base_price_amount": {"type": "float", "description": "Listing base price", "example": 12.0}, "currency_code": {"type": "string", "description": "Listing currency", "example": "USD"}, "fulfillment_type": {"type": "string", "description": "Fulfillment type", "example": "auto"}, "status": {"type": "string", "description": "Listing status", "example": "active"}, "created_at": {"type": "string", "description": "Creation datetime", "example": "2026-02-15T12:45:32Z"}}, "required_tables": ["listings"], "required_fields": {"listings": ["id", "shop_id", "title", "sku", "category_id", "base_price_amount", "currency_code", "fulfillment_type", "status", "created_at"]}}, {"path": "/api/listings/{listing_id}/tags", "method": "POST", "summary": "Add tags to a listing", "description": "Attach one or more tags to the listing. Use to set or update keywords for discoverability.", "operation_id": "add_listing_tags", "tags": ["listings", "tags"], "request_params": {"listing_id": {"type": "integer", "param_type": "path", "required": true, "description": "Unique listing ID", "example": 6732}, "tags": {"type": "array", "param_type": "body", "required": true, "description": "Array of tag names to add", "example": ["wedding", "minimalist", "editable", "A5", "printable"]}}, "response": {"listing_id": {"type": "integer", "description": "Listing ID", "example": 6732}, "tags": {"type": "array", "items": {"tag_id": {"type": "integer", "description": "Tag ID", "example": 14}, "name": {"type": "string", "description": "Tag name", "example": "wedding"}}}}, "required_tables": ["tags", "listing_tags"], "required_fields": {"tags": ["id", "name"], "listing_tags": ["listing_id", "tag_id"]}}, {"path": "/api/listings/{listing_id}/files", "method": "POST", "summary": "Attach files to a listing", "description": "Uploads files and attaches each to the listing with metadata. Use to provide digital assets.", "operation_id": "add_listing_files", "tags": ["listings", "files"], "request_params": {"listing_id": {"type": "integer", "param_type": "path", "required": true, "description": "Listing ID", "example": 6732}, "files": {"type": "array", "param_type": "body", "required": true, "description": "File metadata array with filename, mime_type, and size_bytes", "example": [{"filename": "invitation-template-canva-link.txt", "mime_type": "text/plain", "size_bytes": 1024}, {"filename": "invitation-A5.pdf", "mime_type": "application/pdf", "size_bytes": 2457600}]}}, "response": {"listing_id": {"type": "integer", "description": "Listing ID", "example": 6732}, "files": {"type": "array", "items": {"id": {"type": "integer", "description": "File ID", "example": 450}, "filename": {"type": "string", "description": "Original file name", "example": "invitation-A5.pdf"}, "mime_type": {"type": "string", "description": "MIME type", "example": "application/pdf"}, "size_bytes": {"type": "integer", "description": "File size in bytes", "example": 2457600}, "created_at": {"type": "string", "description": "Upload timestamp", "example": "2026-02-15T09:45:32Z"}}}}, "required_tables": ["listing_files"], "required_fields": {"listing_files": ["id", "listing_id", "filename", "mime_type", "size_bytes", "created_at"]}}, {"path": "/api/listings/{listing_id}", "method": "PATCH", "summary": "Update listing fields", "description": "Modify selected listing fields. Use to update title, price, or status.", "operation_id": "update_listing", "tags": ["listings"], "request_params": {"listing_id": {"type": "integer", "param_type": "path", "required": true, "description": "Listing ID", "example": 1123}, "title": {"type": "string", "param_type": "body", "required": false, "description": "New listing title", "example": "Budget Planner Spreadsheet (Google Sheets + Excel)"}, "base_price_amount": {"type": "float", "param_type": "body", "required": false, "description": "Updated base price", "example": 9.5}}, "response": {"id": {"type": "integer", "description": "Listing ID", "example": 1123}, "title": {"type": "string", "description": "Listing title", "example": "Budget Planner Spreadsheet (Google Sheets + Excel)"}, "base_price_amount": {"type": "float", "description": "Listing base price", "example": 9.5}, "updated_at": {"type": "string", "description": "Last updated timestamp", "example": "2026-02-14T18:29:20Z"}}, "required_tables": ["listings"], "required_fields": {"listings": ["id", "title", "base_price_amount", "updated_at"]}}, {"path": "/api/listings/{listing_id}/variations", "method": "POST", "summary": "Create a variation for a listing", "description": "Defines a new variation for a listing, e.g., license or file format.", "operation_id": "create_listing_variation", "tags": ["listings", "variations"], "request_params": {"listing_id": {"type": "integer", "param_type": "path", "required": true, "description": "Listing ID", "example": 4812}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Variation name", "example": "License"}, "position": {"type": "integer", "param_type": "body", "required": false, "description": "Variation position (display order)", "example": 0}}, "response": {"id": {"type": "integer", "description": "Variation ID", "example": 980}, "listing_id": {"type": "integer", "description": "Listing ID", "example": 4812}, "name": {"type": "string", "description": "Variation name", "example": "License"}, "position": {"type": "integer", "description": "Variation position", "example": 0}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2026-02-15T09:45:32Z"}}, "required_tables": ["listing_variations"], "required_fields": {"listing_variations": ["id", "listing_id", "name", "position", "created_at"]}}, {"path": "/api/listing_variations/{variation_id}/options", "method": "POST", "summary": "Create variation option", "description": "Adds a new option to a variation (e.g. Personal or Commercial license).", "operation_id": "create_variation_option", "tags": ["variations"], "request_params": {"variation_id": {"type": "integer", "param_type": "path", "required": true, "description": "Variation ID", "example": 980}, "value": {"type": "string", "param_type": "body", "required": true, "description": "Option display value", "example": "Commercial"}, "price_delta_amount": {"type": "float", "param_type": "body", "required": false, "description": "Extra price for this option", "example": 25.0}}, "response": {"id": {"type": "integer", "description": "Option ID", "example": 2204}, "variation_id": {"type": "integer", "description": "Variation ID", "example": 980}, "value": {"type": "string", "description": "Option value", "example": "Commercial"}, "price_delta_amount": {"type": "float", "description": "Price delta", "example": 25.0}}, "required_tables": ["variation_options"], "required_fields": {"variation_options": ["id", "variation_id", "value", "price_delta_amount"]}}, {"path": "/api/listings/{listing_id}/inventory_rules", "method": "POST", "summary": "Create inventory rule for a variation option", "description": "Adds inventory limit for a variation option for this listing. Use NULL for unlimited.", "operation_id": "create_inventory_rule", "tags": ["inventory", "listings"], "request_params": {"listing_id": {"type": "integer", "param_type": "path", "required": true, "description": "Listing ID", "example": 7720}, "variation_id": {"type": "integer", "param_type": "body", "required": true, "description": "Variation ID", "example": 3407}, "option_id": {"type": "integer", "param_type": "body", "required": true, "description": "Option ID", "example": 13085}, "max_total_sales": {"type": "integer", "param_type": "body", "required": false, "description": "Maximum allowed sales, NULL for unlimited", "example": 50}}, "response": {"id": {"type": "integer", "description": "Inventory rule ID", "example": 46}, "listing_id": {"type": "integer", "description": "Listing ID", "example": 7720}, "variation_id": {"type": "integer", "description": "Variation ID", "example": 3407}, "option_id": {"type": "integer", "description": "Option ID", "example": 13085}, "max_total_sales": {"type": "integer", "description": "Sales limit, null=unlimited", "example": 50}}, "required_tables": ["listing_inventory_rules"], "required_fields": {"listing_inventory_rules": ["id", "listing_id", "variation_id", "option_id", "max_total_sales"]}}]}, {"group_name": "Tags", "endpoints": [{"path": "/api/tags", "method": "GET", "summary": "List all tags", "description": "Returns all available tags in the platform. Use for autocomplete or search.", "operation_id": "list_tags", "tags": ["tags"], "request_params": {}, "response": {"tags": {"type": "array", "items": {"id": {"type": "integer", "description": "Tag ID", "example": 4}, "name": {"type": "string", "description": "Tag name", "example": "minimalist"}}}}, "required_tables": ["tags"], "required_fields": {"tags": ["id", "name"]}}]}, {"group_name": "Categories", "endpoints": [{"path": "/api/categories", "method": "GET", "summary": "List all categories", "description": "Fetches all product categories. Use to populate category dropdowns.", "operation_id": "list_categories", "tags": ["categories"], "request_params": {}, "response": {"categories": {"type": "array", "items": {"id": {"type": "integer", "description": "Category ID", "example": 4}, "name": {"type": "string", "description": "Category name", "example": "Invitations"}}}}, "required_tables": ["categories"], "required_fields": {"categories": ["id", "name"]}}]}, {"group_name": "Coupons", "endpoints": [{"path": "/api/coupons", "method": "POST", "summary": "Create a coupon code for the shop", "description": "Adds a discount coupon to the authenticated user's shop. Use for shop-wide promotions.", "operation_id": "create_coupon", "tags": ["coupons"], "request_params": {"code": {"type": "string", "param_type": "body", "required": true, "description": "Coupon code", "example": "SPRING20"}, "discount_type": {"type": "string", "param_type": "body", "required": true, "description": "Discount type ('percent')", "example": "percent"}, "discount_value": {"type": "float", "param_type": "body", "required": true, "description": "Discount value (percent)", "example": 20.0}, "minimum_subtotal_amount": {"type": "float", "param_type": "body", "required": false, "description": "Minimum subtotal for coupon activation", "example": 15.0}, "starts_at": {"type": "string", "param_type": "body", "required": true, "description": "Coupon start date/time (ISO 8601)", "example": "2026-03-01T00:00:00Z"}, "ends_at": {"type": "string", "param_type": "body", "required": true, "description": "Coupon end date/time (ISO 8601)", "example": "2026-03-31T23:59:59Z"}, "max_redemptions": {"type": "integer", "param_type": "body", "required": false, "description": "Maximum redemption count", "example": 200}}, "response": {"id": {"type": "integer", "description": "Coupon ID", "example": 886}, "code": {"type": "string", "description": "Coupon code", "example": "SPRING20"}, "discount_type": {"type": "string", "description": "Discount type", "example": "percent"}, "discount_value": {"type": "float", "description": "Discount value", "example": 20.0}, "minimum_subtotal_amount": {"type": "float", "description": "Minimum subtotal", "example": 15.0}, "starts_at": {"type": "string", "description": "Coupon start date/time", "example": "2026-03-01T00:00:00Z"}, "ends_at": {"type": "string", "description": "Coupon end date/time", "example": "2026-03-31T23:59:59Z"}, "max_redemptions": {"type": "integer", "description": "Maximum redemption count", "example": 200}}, "required_tables": ["coupons"], "required_fields": {"coupons": ["id", "code", "discount_type", "discount_value", "minimum_subtotal_amount", "starts_at", "ends_at", "max_redemptions"]}}]}, {"group_name": "Sales", "endpoints": [{"path": "/api/sales", "method": "POST", "summary": "Create a sale for the shop", "description": "Adds a sale event to the authenticated user's shop with percent discount and duration.", "operation_id": "create_sale", "tags": ["sales"], "request_params": {"name": {"type": "string", "param_type": "body", "required": false, "description": "Sale event name", "example": "72hr Wedding Invitation Sale"}, "discount_type": {"type": "string", "param_type": "body", "required": true, "description": "Discount type ('percent')", "example": "percent"}, "discount_value": {"type": "float", "param_type": "body", "required": true, "description": "Percent discount", "example": 30.0}, "starts_at": {"type": "string", "param_type": "body", "required": true, "description": "Sale start date/time", "example": "2026-02-20T09:00:00Z"}, "ends_at": {"type": "string", "param_type": "body", "required": true, "description": "Sale end date/time", "example": "2026-02-23T09:00:00Z"}, "allow_coupon_stacking": {"type": "boolean", "param_type": "body", "required": false, "description": "Allow stacking with coupons (false to prevent stacking)", "example": false}}, "response": {"id": {"type": "integer", "description": "Sale ID", "example": 77}, "name": {"type": "string", "description": "Sale event name", "example": "72hr Wedding Invitation Sale"}, "discount_type": {"type": "string", "description": "Discount type", "example": "percent"}, "discount_value": {"type": "float", "description": "Percent discount", "example": 30.0}, "starts_at": {"type": "string", "description": "Sale start date/time", "example": "2026-02-20T09:00:00Z"}, "ends_at": {"type": "string", "description": "Sale end date/time", "example": "2026-02-23T09:00:00Z"}, "allow_coupon_stacking": {"type": "boolean", "description": "Coupons stacking allowed", "example": false}}, "required_tables": ["sales"], "required_fields": {"sales": ["id", "name", "discount_type", "discount_value", "starts_at", "ends_at", "allow_coupon_stacking"]}}, {"path": "/api/sale_listings", "method": "POST", "summary": "Assign listing to sale", "description": "Links a listing to a sale event for discount activation. Use after creating a sale.", "operation_id": "assign_listing_to_sale", "tags": ["sales", "listings"], "request_params": {"sale_id": {"type": "integer", "param_type": "body", "required": true, "description": "Sale ID", "example": 77}, "listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "Listing ID", "example": 6633}}, "response": {"sale_id": {"type": "integer", "description": "Sale ID", "example": 77}, "listing_id": {"type": "integer", "description": "Listing ID", "example": 6633}}, "required_tables": ["sale_listings"], "required_fields": {"sale_listings": ["sale_id", "listing_id", "created_at"]}}]}, {"group_name": "Analytics", "endpoints": [{"path": "/api/listings/top", "method": "GET", "summary": "Get top N listings by shop revenue", "description": "Returns top listings by revenue for date range. Use for sales analytics/reporting.", "operation_id": "listings_top_by_revenue", "tags": ["analytics", "listings"], "request_params": {"start_date": {"type": "string", "param_type": "query", "required": true, "description": "Range start date (ISO 8601)", "example": "2026-01-01"}, "end_date": {"type": "string", "param_type": "query", "required": true, "description": "Range end date (ISO 8601)", "example": "2026-01-31"}, "limit": {"type": "integer", "param_type": "query", "required": false, "description": "Max result count", "example": 5}}, "response": {"listings": {"type": "array", "items": {"id": {"type": "integer", "description": "Listing ID", "example": 5537}, "title": {"type": "string", "description": "Listing title", "example": "Minimalist Wedding Invitation Template (A5)"}, "units_sold": {"type": "integer", "description": "Total units sold", "example": 23}, "gross_revenue": {"type": "float", "description": "Total gross revenue", "example": 276.0}, "fees": {"type": "float", "description": "Total fees (platform, processing, etc.)", "example": 36.0}, "net_revenue": {"type": "float", "description": "Gross revenue minus fees", "example": 240.0}}}}, "required_tables": ["orders", "order_items", "order_fee_lines", "listings"], "required_fields": {"orders": ["id", "shop_id", "placed_at"], "order_items": ["order_id", "listing_id", "quantity", "unit_price_amount"], "order_fee_lines": ["order_id", "amount"], "listings": ["id", "title"]}}]}, {"group_name": "Orders", "endpoints": [{"path": "/api/orders/{order_id}", "method": "PATCH", "summary": "Update order fulfillment status and private note", "description": "Sets fulfillment to fulfilled and adds private note. For converting completed manual orders.", "operation_id": "update_order_fulfillment_and_note", "tags": ["orders"], "request_params": {"order_id": {"type": "integer", "param_type": "path", "required": true, "description": "Order ID to update", "example": 90517}, "fulfillment_status": {"type": "string", "param_type": "body", "required": false, "description": "New fulfillment status ('fulfilled' or 'manual')", "example": "fulfilled"}, "private_note": {"type": "string", "param_type": "body", "required": false, "description": "Private note for the order", "example": "Sent custom color variant via message on 2026-02-18"}}, "response": {"id": {"type": "integer", "description": "Order ID", "example": 90517}, "fulfillment_status": {"type": "string", "description": "Fulfillment status", "example": "fulfilled"}, "private_note": {"type": "string", "description": "Order private note", "example": "Sent custom color variant via message on 2026-02-18"}}, "required_tables": ["orders"], "required_fields": {"orders": ["id", "fulfillment_status", "private_note"]}}]}, {"group_name": "Messages", "endpoints": [{"path": "/api/messages", "method": "POST", "summary": "Send a message to a buyer", "description": "Sends a message linked to an order from seller to buyer. Use for communication and proof of fulfillment.", "operation_id": "send_order_message", "tags": ["messages", "orders"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order ID for the message", "example": 90517}, "recipient_user_id": {"type": "integer", "param_type": "body", "required": true, "description": "Buyer User ID", "example": 4578}, "body": {"type": "string", "param_type": "body", "required": true, "description": "Message body/content", "example": "Hi! Your custom color variant is readythanks for your order; please reply if you need any tweaks."}, "is_private": {"type": "boolean", "param_type": "body", "required": false, "description": "Private note indicator (false for buyer-facing)", "example": false}}, "response": {"id": {"type": "integer", "description": "Message ID", "example": 38922}, "order_id": {"type": "integer", "description": "Order ID", "example": 90517}, "recipient_user_id": {"type": "integer", "description": "Recipient (buyer) user ID", "example": 4578}, "sender_user_id": {"type": "integer", "description": "Sender user ID (current user)", "example": 1}, "body": {"type": "string", "description": "Message text", "example": "Hi! Your custom color variant is readythanks for your order; please reply if you need any tweaks."}, "is_private": {"type": "boolean", "description": "Private note flag", "example": false}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2026-02-18T13:12:45Z"}}, "required_tables": ["messages"], "required_fields": {"messages": ["id", "order_id", "sender_user_id", "recipient_user_id", "body", "is_private", "created_at"]}}]}, {"group_name": "Refunds", "endpoints": [{"path": "/api/refunds", "method": "POST", "summary": "Issue a refund for an order", "description": "Records a refund for an order, specifying amount, reason, and platform fee adjustment if required.", "operation_id": "create_refund", "tags": ["refunds", "orders"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order ID for refund", "example": 89110}, "amount": {"type": "float", "param_type": "body", "required": true, "description": "Refund amount in USD", "example": 6.0}, "reason": {"type": "string", "param_type": "body", "required": true, "description": "Reason for refund", "example": "File duplicated in bundle"}, "platform_fee_adjustment_amount": {"type": "float", "param_type": "body", "required": false, "description": "Platform fee adjustment (if applicable)", "example": 1.1}}, "response": {"id": {"type": "integer", "description": "Refund ID", "example": 1188}, "order_id": {"type": "integer", "description": "Order ID", "example": 89110}, "amount": {"type": "float", "description": "Refund amount", "example": 6.0}, "reason": {"type": "string", "description": "Refund reason", "example": "File duplicated in bundle"}, "platform_fee_adjustment_amount": {"type": "float", "description": "Platform fee adjustment", "example": 1.1}, "created_at": {"type": "string", "description": "Timestamp", "example": "2026-02-20T19:30:22Z"}}, "required_tables": ["refunds"], "required_fields": {"refunds": ["id", "order_id", "amount", "reason", "platform_fee_adjustment_amount", "created_at"]}}]}, {"group_name": "AdminActions", "endpoints": [{"path": "/api/admin_actions/takedown_listing", "method": "POST", "summary": "Admin takedown of a listing", "description": "Records an admin takedown for a listing and updates status/notify seller. Used for policy violations.", "operation_id": "admin_takedown_listing", "tags": ["admin", "listings"], "request_params": {"actor_user_id": {"type": "integer", "param_type": "body", "required": true, "description": "Admin user ID (must be 1 for this spec)", "example": 1}, "target_listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "Listing ID to takedown", "example": 7001}, "reason": {"type": "string", "param_type": "body", "required": true, "description": "Reason for takedown", "example": "Policy: trademark infringement"}, "message_to_seller": {"type": "string", "param_type": "body", "required": true, "description": "Notification message to seller", "example": "Your listing was removed due to trademarked terms in the title; please edit and resubmit without brand names."}}, "response": {"action_id": {"type": "integer", "description": "Admin action record ID", "example": 357}, "target_listing_id": {"type": "integer", "description": "Listing ID taken down", "example": 7001}, "status": {"type": "string", "description": "Listing status set", "example": "removed"}, "removed_reason": {"type": "string", "description": "Listing removed reason", "example": "Policy: trademark infringement"}, "message_to_seller": {"type": "string", "description": "Notification message", "example": "Your listing was removed due to trademarked terms in the title; please edit and resubmit without brand names."}, "created_at": {"type": "string", "description": "Action creation timestamp", "example": "2026-02-18T22:34:05Z"}}, "required_tables": ["admin_actions", "listings"], "required_fields": {"admin_actions": ["id", "actor_user_id", "action_type", "target_type", "target_id", "reason", "message_to_seller", "created_at"], "listings": ["id", "status", "removed_reason", "removed_by_user_id", "removed_at"]}}, {"path": "/api/admin_actions/set_seller_verification", "method": "POST", "summary": "Admin sets seller verification status", "description": "Updates seller verification status and logs admin action. Use for review-required cases.", "operation_id": "admin_set_seller_verification", "tags": ["admin", "users"], "request_params": {"actor_user_id": {"type": "integer", "param_type": "body", "required": true, "description": "Admin user ID", "example": 1}, "target_user_id": {"type": "integer", "param_type": "body", "required": true, "description": "User ID whose verification is updated", "example": 322}, "verification_status": {"type": "string", "param_type": "body", "required": true, "description": "New verification status ('review_required')", "example": "review_required"}, "reason": {"type": "string", "param_type": "body", "required": false, "description": "Reason for status change", "example": "Trademark review pending"}}, "response": {"action_id": {"type": "integer", "description": "Admin action record ID", "example": 498}, "user_id": {"type": "integer", "description": "Affected user ID", "example": 322}, "verification_status": {"type": "string", "description": "Current verification status", "example": "review_required"}, "reason": {"type": "string", "description": "Reason for status change", "example": "Trademark review pending"}, "created_at": {"type": "string", "description": "Action creation timestamp", "example": "2026-02-18T22:35:05Z"}}, "required_tables": ["admin_actions", "users"], "required_fields": {"admin_actions": ["id", "actor_user_id", "action_type", "target_type", "target_id", "reason", "created_at"], "users": ["id", "verification_status"]}}]}]}}
{"scenario": "Rover", "api_spec": {"api_groups": [{"group_name": "Pets", "endpoints": [{"path": "/api/pets", "method": "POST", "summary": "Add a new pet record for current user", "description": "Create a new pet with all fields and set current user as owner. Use to add a pet to your profile.", "operation_id": "create_pet", "tags": ["pets"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Pet's name", "example": "Milo"}, "species": {"type": "string", "param_type": "body", "required": true, "description": "Species of the pet", "example": "dog"}, "breed": {"type": "string", "param_type": "body", "required": false, "description": "Breed of the pet", "example": "Golden Retriever"}, "sex": {"type": "string", "param_type": "body", "required": false, "description": "Sex of the pet", "example": "male"}, "age_years": {"type": "integer", "param_type": "body", "required": false, "description": "Age of pet in years", "example": 3}, "birth_date": {"type": "string", "param_type": "body", "required": false, "description": "Birth date (YYYY-MM-DD)", "example": "2021-07-10"}, "behavior_notes": {"type": "string", "param_type": "body", "required": false, "description": "Behavior notes for the pet", "example": "friendly with dogs, nervous around fireworks"}, "emergency_contact_name": {"type": "string", "param_type": "body", "required": false, "description": "Emergency contact person's name", "example": "Sara Kim"}, "emergency_contact_phone": {"type": "string", "param_type": "body", "required": false, "description": "Emergency contact phone number", "example": "+1-415-555-0139"}}, "response": {"id": {"type": "integer", "description": "Newly created pet's ID", "example": 11}, "owner_user_id": {"type": "integer", "description": "Owner user id (auto set as 1)", "example": 1}, "name": {"type": "string", "description": "Pet name", "example": "Milo"}, "species": {"type": "string", "description": "Pet species", "example": "dog"}, "breed": {"type": "string", "description": "Pet breed", "example": "Golden Retriever"}, "sex": {"type": "string", "description": "Pet sex", "example": "male"}, "birth_date": {"type": "string", "description": "Birth date", "example": "2021-07-10"}, "age_years": {"type": "integer", "description": "Pet's age in years (if provided)", "example": 3}, "behavior_notes": {"type": "string", "description": "Behavior notes", "example": "friendly with dogs, nervous around fireworks"}, "emergency_contact_name": {"type": "string", "description": "Emergency contact's name", "example": "Sara Kim"}, "emergency_contact_phone": {"type": "string", "description": "Emergency contact's number", "example": "+1-415-555-0139"}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2024-06-03T12:00:00Z"}}, "required_tables": ["pets"], "required_fields": {"pets": ["id", "owner_user_id", "name", "species", "breed", "sex", "birth_date", "age_years", "behavior_notes", "emergency_contact_name", "emergency_contact_phone", "created_at"]}}, {"path": "/api/pet_vaccinations", "method": "POST", "summary": "Add a vaccination record for a pet", "description": "Create a vaccination entry (rabies, dhpp) for an owned pet. Call after pet creation.", "operation_id": "create_pet_vaccination", "tags": ["pets", "pet_vaccinations"], "request_params": {"pet_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of the owned pet", "example": 11}, "vaccine_type": {"type": "string", "param_type": "body", "required": true, "description": "Type of vaccine: rabies or dhpp", "example": "rabies"}, "administered_on": {"type": "string", "param_type": "body", "required": true, "description": "Date vaccine was administered (YYYY-MM-DD)", "example": "2025-01-10"}}, "response": {"id": {"type": "integer", "description": "Vaccination record ID", "example": 1}, "pet_id": {"type": "integer", "description": "Pet ID this vaccination belongs to", "example": 11}, "vaccine_type": {"type": "string", "description": "Vaccine type", "example": "rabies"}, "administered_on": {"type": "string", "description": "Date administered", "example": "2025-01-10"}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2024-06-03T12:00:00Z"}}, "required_tables": ["pet_vaccinations"], "required_fields": {"pet_vaccinations": ["id", "pet_id", "vaccine_type", "administered_on", "created_at"]}}]}, {"group_name": "Service Listings and Availability", "endpoints": [{"path": "/api/service_listings/search", "method": "GET", "summary": "Search dog walk sitters by location, date, time and sort results", "description": "Find active walk services near provided postal code/time, sorted by price & rating. For searching walk/visit sitters.", "operation_id": "search_walkers", "tags": ["service_listings", "search"], "request_params": {"service_type": {"type": "string", "param_type": "query", "required": true, "description": "Service type (walk, drop_in, boarding, daycare)", "example": "walk"}, "base_postal_code": {"type": "string", "param_type": "query", "required": true, "description": "Base postal code to search from", "example": "94107"}, "service_radius_miles": {"type": "float", "param_type": "query", "required": true, "description": "Radius in miles from postal code", "example": 2.0}, "date": {"type": "string", "param_type": "query", "required": true, "description": "Service date (YYYY-MM-DD)", "example": "2026-03-05"}, "start_time": {"type": "string", "param_type": "query", "required": true, "description": "Window start time in 24h HH:MM", "example": "18:00"}, "end_time": {"type": "string", "param_type": "query", "required": true, "description": "Window end time in 24h HH:MM", "example": "19:00"}, "duration_minutes": {"type": "integer", "param_type": "query", "required": true, "description": "Requested service duration in minutes", "example": 30}, "limit": {"type": "integer", "param_type": "query", "required": false, "description": "Max results to return", "example": 3}, "sort": {"type": "string", "param_type": "query", "required": false, "description": "Sorting order. Use 'price_asc' for lowest price.", "example": "price_asc"}}, "response": {"results": {"type": "array", "description": "Matching sitters and their walk details", "items": {"service_listing_id": {"type": "integer", "description": "Service listing ID", "example": 51}, "sitter_user_id": {"type": "integer", "description": "Sitter's user ID", "example": 42}, "sitter_name": {"type": "string", "description": "Sitter's display name", "example": "Jordan Lee"}, "per_walk_rate": {"type": "float", "description": "Price per walk", "example": 20.0}, "currency": {"type": "string", "description": "Currency code", "example": "USD"}, "avg_rating": {"type": "float", "description": "Average sitter rating on date", "example": 4.92}}}}, "required_tables": ["service_listings", "service_availability_rules", "sitter_daily_metrics"], "required_fields": {"service_listings": ["id", "sitter_user_id", "service_type", "price_amount", "price_unit", "currency", "base_postal_code", "service_radius_miles", "city", "state", "active"], "sitter_daily_metrics": ["sitter_user_id", "metric_date", "avg_rating"], "users": ["id", "full_name"]}}, {"path": "/api/service_listings", "method": "POST", "summary": "Create a new service listing for the authenticated sitter", "description": "Add a new drop-in, walk, boarding or daycare service listing under current sitter.", "operation_id": "create_service_listing", "tags": ["service_listings"], "request_params": {"service_type": {"type": "string", "param_type": "body", "required": true, "description": "Service type", "example": "drop_in"}, "title": {"type": "string", "param_type": "body", "required": false, "description": "Service title", "example": "Drop-in visit"}, "description": {"type": "string", "param_type": "body", "required": false, "description": "Service description", "example": "Care for your pet at your home"}, "house_rules": {"type": "string", "param_type": "body", "required": false, "description": "House rules for this service", "example": "no off-leash, no dog parks"}, "price_amount": {"type": "float", "param_type": "body", "required": true, "description": "Price for this service (per unit)", "example": 28.0}, "price_unit": {"type": "string", "param_type": "body", "required": true, "description": "Unit for the price", "example": "per_visit"}, "currency": {"type": "string", "param_type": "body", "required": false, "description": "Currency code", "example": "USD"}, "base_postal_code": {"type": "string", "param_type": "body", "required": true, "description": "Listing's base postal code", "example": "11211"}, "service_radius_miles": {"type": "float", "param_type": "body", "required": true, "description": "Radius of service area in miles", "example": 3.0}, "city": {"type": "string", "param_type": "body", "required": false, "description": "City served", "example": "Brooklyn"}, "state": {"type": "string", "param_type": "body", "required": false, "description": "State served", "example": "NY"}}, "response": {"id": {"type": "integer", "description": "Service listing ID", "example": 100}, "sitter_user_id": {"type": "integer", "description": "Sitter's user ID (auto set)", "example": 1}, "service_type": {"type": "string", "description": "Service type", "example": "drop_in"}, "price_amount": {"type": "float", "description": "Service price amount", "example": 28.0}, "price_unit": {"type": "string", "description": "Service price unit", "example": "per_visit"}, "currency": {"type": "string", "description": "Currency", "example": "USD"}, "base_postal_code": {"type": "string", "description": "Base postal code", "example": "11211"}, "service_radius_miles": {"type": "float", "description": "Radius in miles", "example": 3.0}, "house_rules": {"type": "string", "description": "House rules", "example": "no off-leash, no dog parks"}, "city": {"type": "string", "description": "City", "example": "Brooklyn"}, "state": {"type": "string", "description": "State", "example": "NY"}, "active": {"type": "integer", "description": "Is this listing active (1=yes, 0=no)", "example": 1}, "created_at": {"type": "string", "description": "Creation time", "example": "2024-06-03T12:00:00Z"}}, "required_tables": ["service_listings"], "required_fields": {"service_listings": ["id", "sitter_user_id", "service_type", "title", "description", "house_rules", "price_amount", "price_unit", "currency", "base_postal_code", "service_radius_miles", "city", "state", "active", "created_at"]}}, {"path": "/api/service_availability_rules", "method": "POST", "summary": "Add weekly availability rule to service listing", "description": "Specify days/times service listing is available starting given date. For recurring slots.", "operation_id": "create_service_availability_rule", "tags": ["service_listings", "availability"], "request_params": {"service_listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "Service listing to add to", "example": 100}, "start_date": {"type": "string", "param_type": "body", "required": true, "description": "Date for this rule to start (YYYY-MM-DD)", "example": "2026-03-01"}, "day_of_week": {"type": "integer", "param_type": "body", "required": true, "description": "Day of week (0=Monday to 6=Sunday)", "example": 0}, "start_time": {"type": "string", "param_type": "body", "required": true, "description": "Window start time (HH:MM in 24h)", "example": "07:00"}, "end_time": {"type": "string", "param_type": "body", "required": true, "description": "Window end time (HH:MM in 24h)", "example": "09:00"}}, "response": {"id": {"type": "integer", "description": "Availability rule ID", "example": 14}, "service_listing_id": {"type": "integer", "description": "Service listing ID", "example": 100}, "start_date": {"type": "string", "description": "Start date for this rule", "example": "2026-03-01"}, "day_of_week": {"type": "integer", "description": "Applicable day of week (0=Monday)", "example": 0}, "start_time": {"type": "string", "description": "Start time", "example": "07:00"}, "end_time": {"type": "string", "description": "End time", "example": "09:00"}}, "required_tables": ["service_availability_rules"], "required_fields": {"service_availability_rules": ["id", "service_listing_id", "start_date", "day_of_week", "start_time", "end_time"]}}, {"path": "/api/service_blackouts", "method": "POST", "summary": "Block off service listing for custom blackout (like travel/unavailable)", "description": "Creates an unavailable period for given service listing across any date/time span.", "operation_id": "create_service_blackout", "tags": ["service_listings", "blackouts"], "request_params": {"service_listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of the listing", "example": 88}, "start_datetime": {"type": "string", "param_type": "body", "required": true, "description": "Blackout start datetime (YYYY-MM-DDTHH:MM:SS)", "example": "2026-03-14T00:00:00"}, "end_datetime": {"type": "string", "param_type": "body", "required": true, "description": "Blackout end datetime", "example": "2026-03-16T23:59:59"}, "reason": {"type": "string", "param_type": "body", "required": false, "description": "Optional blackout reason", "example": "Travel"}}, "response": {"id": {"type": "integer", "description": "Blackout ID", "example": 7}, "service_listing_id": {"type": "integer", "description": "Service listing blocked", "example": 88}, "start_datetime": {"type": "string", "description": "Blackout period start", "example": "2026-03-14T00:00:00"}, "end_datetime": {"type": "string", "description": "Blackout period end", "example": "2026-03-16T23:59:59"}, "reason": {"type": "string", "description": "Reason provided", "example": "Travel"}}, "required_tables": ["service_blackouts"], "required_fields": {"service_blackouts": ["id", "service_listing_id", "start_datetime", "end_datetime", "reason"]}}, {"path": "/api/service_capacity", "method": "POST", "summary": "Set service listing capacity for max dogs per night", "description": "Create or update boarding service capacity limit for a listing.", "operation_id": "set_service_capacity", "tags": ["service_listings", "capacity"], "request_params": {"service_listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "Service listing ID", "example": 77}, "max_dogs_per_night": {"type": "integer", "param_type": "body", "required": true, "description": "Max dogs per night (boarding capacity)", "example": 2}}, "response": {"id": {"type": "integer", "description": "Capacity record ID", "example": 31}, "service_listing_id": {"type": "integer", "description": "Service listing", "example": 77}, "max_dogs_per_night": {"type": "integer", "description": "Per-night boarding max dogs", "example": 2}}, "required_tables": ["service_capacity"], "required_fields": {"service_capacity": ["id", "service_listing_id", "max_dogs_per_night"]}}]}, {"group_name": "Bookings", "endpoints": [{"path": "/api/bookings", "method": "POST", "summary": "Request a new booking for pet and service listing", "description": "Create a new booking for a pet with specified listing, times, and message. Returns complete booking info.", "operation_id": "create_booking", "tags": ["bookings"], "request_params": {"service_listing_id": {"type": "integer", "param_type": "body", "required": true, "description": "Service listing to book", "example": 51}, "pet_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of pet to book for", "example": 11}, "start_datetime": {"type": "string", "param_type": "body", "required": true, "description": "Job start datetime (YYYY-MM-DDTHH:MM)", "example": "2026-03-05T18:15:00"}, "end_datetime": {"type": "string", "param_type": "body", "required": true, "description": "Job end datetime (YYYY-MM-DDTHH:MM)", "example": "2026-03-05T18:45:00"}, "duration_minutes": {"type": "integer", "param_type": "body", "required": false, "description": "Duration in minutes (optional; calculated from start/end)", "example": 30}, "owner_message": {"type": "string", "param_type": "body", "required": false, "description": "Optional owner message for sitter", "example": "Please use the lobby entrance and avoid the construction zone on 3rd St."}}, "response": {"id": {"type": "integer", "description": "New booking ID", "example": 200}, "booking_code": {"type": "string", "description": "Unique booking code", "example": "BK-10500"}, "service_listing_id": {"type": "integer", "description": "Linked service listing", "example": 51}, "owner_user_id": {"type": "integer", "description": "Booking user's id (auto set)", "example": 1}, "sitter_user_id": {"type": "integer", "description": "Sitter assigned", "example": 42}, "pet_id": {"type": "integer", "description": "Booked pet ID", "example": 11}, "status": {"type": "string", "description": "Current status", "example": "pending"}, "start_datetime": {"type": "string", "description": "Start time", "example": "2026-03-05T18:15:00"}, "end_datetime": {"type": "string", "description": "End time", "example": "2026-03-05T18:45:00"}, "duration_minutes": {"type": "integer", "description": "Job duration", "example": 30}, "owner_message": {"type": "string", "description": "Booking note for sitter", "example": "Please use the lobby entrance and avoid the construction zone on 3rd St."}}, "required_tables": ["bookings"], "required_fields": {"bookings": ["id", "booking_code", "service_listing_id", "owner_user_id", "sitter_user_id", "pet_id", "status", "start_datetime", "end_datetime", "duration_minutes", "owner_message"]}}, {"path": "/api/bookings/{booking_id}/accept", "method": "POST", "summary": "Accept a pending booking as the selected sitter", "description": "Update a pending booking from status=pending to accepted by the assigned sitter.", "operation_id": "accept_booking", "tags": ["bookings", "actions"], "request_params": {"booking_id": {"type": "integer", "param_type": "path", "required": true, "description": "Booking to accept", "example": 333}}, "response": {"id": {"type": "integer", "description": "Booking ID", "example": 333}, "status": {"type": "string", "description": "Booking status", "example": "accepted"}}, "required_tables": ["bookings"], "required_fields": {"bookings": ["id", "status"]}}, {"path": "/api/booking_pricing/{booking_id}/apply_promo", "method": "POST", "summary": "Apply a promo code to a booking and get updated total", "description": "Apply a promo code and return recalculated amounts and platform fees for a booking.", "operation_id": "apply_promo_code_booking", "tags": ["bookings", "payments"], "request_params": {"booking_id": {"type": "integer", "param_type": "path", "required": true, "description": "Booking to update", "example": 333}, "promo_code": {"type": "string", "param_type": "body", "required": true, "description": "Promotional code to apply", "example": "SPRING10"}}, "response": {"booking_id": {"type": "integer", "description": "Booking receiving discount", "example": 333}, "currency": {"type": "string", "description": "Currency for booking", "example": "USD"}, "base_amount": {"type": "float", "description": "Base before discount/fees", "example": 120.0}, "promo_code_id": {"type": "integer", "description": "Applied promo code ID", "example": 4}, "promo_discount_amount": {"type": "float", "description": "Promo applied discount", "example": 10.0}, "platform_fee_amount": {"type": "float", "description": "Platform service fee", "example": 8.0}, "total_amount": {"type": "float", "description": "Final amount due (total)", "example": 118.0}}, "required_tables": ["booking_pricing", "promo_codes"], "required_fields": {"booking_pricing": ["booking_id", "currency", "base_amount", "promo_code_id", "promo_discount_amount", "platform_fee_amount", "total_amount"]}}, {"path": "/api/bookings/{booking_id}", "method": "GET", "summary": "Get details of a specific booking", "description": "View all details for a single booking, including dates, status, pet, and sitter.", "operation_id": "get_booking", "tags": ["bookings"], "request_params": {"booking_id": {"type": "integer", "param_type": "path", "required": true, "description": "Booking ID to fetch", "example": 200}}, "response": {"id": {"type": "integer", "description": "Booking ID", "example": 200}, "booking_code": {"type": "string", "description": "Unique booking code", "example": "BK-10500"}, "pet_id": {"type": "integer", "description": "Pet ID", "example": 11}, "sitter_user_id": {"type": "integer", "description": "Sitter user ID", "example": 42}, "owner_user_id": {"type": "integer", "description": "Owner user ID", "example": 1}, "status": {"type": "string", "description": "Booking status", "example": "pending"}, "start_datetime": {"type": "string", "description": "Start date/time", "example": "2026-03-05T18:15:00"}, "end_datetime": {"type": "string", "description": "End date/time", "example": "2026-03-05T18:45:00"}, "owner_message": {"type": "string", "description": "Owner's message", "example": "Please use the lobby entrance."}}, "required_tables": ["bookings"], "required_fields": {"bookings": ["id", "booking_code", "pet_id", "sitter_user_id", "owner_user_id", "status", "start_datetime", "end_datetime", "owner_message"]}}, {"path": "/api/bookings/{booking_id}/cancel", "method": "POST", "summary": "Cancel a booking and optionally request a refund", "description": "Cancel the booking with a reason, and if eligible, request refund to original method.", "operation_id": "cancel_booking", "tags": ["bookings", "actions"], "request_params": {"booking_id": {"type": "integer", "param_type": "path", "required": true, "description": "Booking ID to cancel", "example": 456}, "reason_code": {"type": "string", "param_type": "body", "required": true, "description": "Reason for cancellation (see schema's allowed values)", "example": "pet_illness"}, "request_refund": {"type": "boolean", "param_type": "body", "required": false, "description": "Request refund if eligible (default true)", "example": true}}, "response": {"id": {"type": "integer", "description": "Booking ID canceled", "example": 456}, "status": {"type": "string", "description": "Booking is now canceled", "example": "canceled"}, "cancellation_reason_code": {"type": "string", "description": "Cancellation reason", "example": "pet_illness"}, "refund_requested": {"type": "boolean", "description": "Was refund requested", "example": true}}, "required_tables": ["bookings", "refund_requests"], "required_fields": {"bookings": ["id", "status", "cancellation_reason_code"], "refund_requests": ["booking_id", "requested_amount", "status"]}}]}, {"group_name": "Messages", "endpoints": [{"path": "/api/message_threads", "method": "GET", "summary": "List all message threads for current user", "description": "Fetch all owner- or sitter-involved message threads for the logged-in user.", "operation_id": "list_message_threads", "tags": ["messages"], "request_params": {}, "response": {"threads": {"type": "array", "description": "Message threads owned by or involving user", "items": {"id": {"type": "integer", "description": "Thread ID", "example": 17}, "thread_code": {"type": "string", "description": "Unique thread code", "example": "MSG-88310"}, "booking_id": {"type": "integer", "description": "Related booking", "example": 10492}, "sitter_user_id": {"type": "integer", "description": "Sitter id", "example": 77}, "owner_user_id": {"type": "integer", "description": "Owner id", "example": 1}}}}, "required_tables": ["message_threads"], "required_fields": {"message_threads": ["id", "thread_code", "booking_id", "sitter_user_id", "owner_user_id"]}}, {"path": "/api/message_threads/{thread_code}/messages", "method": "POST", "summary": "Send a message in a thread as current user", "description": "Post a new message in the designated message thread. Use for owner/sitter chat with context.", "operation_id": "send_message", "tags": ["messages"], "request_params": {"thread_code": {"type": "string", "param_type": "path", "required": true, "description": "Thread code of the conversation", "example": "MSG-88310"}, "body": {"type": "string", "param_type": "body", "required": true, "description": "Message content", "example": "Can you confirm youre comfortable administering an oral flea tablet after the walk if I leave it on the counter?"}}, "response": {"id": {"type": "integer", "description": "New message record ID", "example": 1501}, "message_code": {"type": "string", "description": "Unique code for this message", "example": "MSG-120204"}, "thread_id": {"type": "integer", "description": "Thread this belongs to", "example": 17}, "sender_user_id": {"type": "integer", "description": "Sender user id (auto set)", "example": 1}, "body": {"type": "string", "description": "Full body of the message", "example": "Can you confirm youre comfortable administering an oral flea tablet after the walk if I leave it on the counter?"}, "sent_at": {"type": "string", "description": "Message send time", "example": "2024-06-03T13:41:00Z"}}, "required_tables": ["messages"], "required_fields": {"messages": ["id", "message_code", "thread_id", "sender_user_id", "body", "sent_at"]}}]}, {"group_name": "Visit Reports", "endpoints": [{"path": "/api/visit_reports", "method": "POST", "summary": "Create a visit report for a booking", "description": "Submit a report for a completed visit during a booking, including notes and photos metadata.", "operation_id": "create_visit_report", "tags": ["visit_reports"], "request_params": {"booking_id": {"type": "integer", "param_type": "body", "required": true, "description": "Booking this report is for", "example": 202}, "report_datetime": {"type": "string", "param_type": "body", "required": true, "description": "Date/time report is being made for", "example": "2026-04-11T18:45:00-04:00"}, "potty_notes": {"type": "string", "param_type": "body", "required": false, "description": "Potty break notes", "example": "pee and poop"}, "meal_notes": {"type": "string", "param_type": "body", "required": false, "description": "Meal/feeding notes", "example": "ate 1 cup kibble"}}, "response": {"id": {"type": "integer", "description": "Visit report ID", "example": 88}, "booking_id": {"type": "integer", "description": "Booking linked to report", "example": 202}, "report_datetime": {"type": "string", "description": "Report date/time", "example": "2026-04-11T18:45:00-04:00"}, "potty_notes": {"type": "string", "description": "Potty break notes", "example": "pee and poop"}, "meal_notes": {"type": "string", "description": "Meal/feeding notes", "example": "ate 1 cup kibble"}}, "required_tables": ["visit_reports"], "required_fields": {"visit_reports": ["id", "booking_id", "report_datetime", "potty_notes", "meal_notes"]}}, {"path": "/api/visit_report_photos", "method": "POST", "summary": "Add photo metadata entry to a visit report", "description": "Attach a photo (metadata reference and caption) to a visit report. For real photo files, use storage_key.", "operation_id": "add_visit_report_photo", "tags": ["visit_reports", "photos"], "request_params": {"visit_report_id": {"type": "integer", "param_type": "body", "required": true, "description": "Visit report to attach photo to", "example": 88}, "taken_at": {"type": "string", "param_type": "body", "required": true, "description": "Date/time when photo was taken", "example": "2026-04-11T08:12:00-04:00"}, "caption": {"type": "string", "param_type": "body", "required": false, "description": "Caption for this photo", "example": "Morning walk"}, "storage_key": {"type": "string", "param_type": "body", "required": false, "description": "Object storage key for file, if uploaded", "example": "vrp/88/2026-04-11T08_12_00.jpg"}}, "response": {"id": {"type": "integer", "description": "Visit report photo ID", "example": 201}, "visit_report_id": {"type": "integer", "description": "Visit report this photo is linked to", "example": 88}, "taken_at": {"type": "string", "description": "Photo timestamp", "example": "2026-04-11T08:12:00-04:00"}, "caption": {"type": "string", "description": "Photo caption", "example": "Morning walk"}, "storage_key": {"type": "string", "description": "Storage key for image file", "example": "vrp/88/2026-04-11T08_12_00.jpg"}}, "required_tables": ["visit_report_photos"], "required_fields": {"visit_report_photos": ["id", "visit_report_id", "taken_at", "caption", "storage_key"]}}]}, {"group_name": "Support and Disputes", "endpoints": [{"path": "/api/support_tickets", "method": "POST", "summary": "Open a new support ticket for booking or fee issues", "description": "Create a support ticket for a fee dispute or booking problem, referencing optional booking and thread.", "operation_id": "create_support_ticket", "tags": ["support", "disputes"], "request_params": {"category": {"type": "string", "param_type": "body", "required": true, "description": "Primary category (fee_dispute, payment, booking, other)", "example": "fee_dispute"}, "subject": {"type": "string", "param_type": "body", "required": false, "description": "Short issue summary", "example": "Late Cancellation Fee Dispute"}, "description": {"type": "string", "param_type": "body", "required": true, "description": "Detailed description of the issue", "example": "Sitter canceled 2 hours before start; I was still charged a late fee"}, "booking_id": {"type": "integer", "param_type": "body", "required": false, "description": "Booking involved (if any)", "example": 10492}, "related_thread_id": {"type": "integer", "param_type": "body", "required": false, "description": "ID of related message thread, if applicable", "example": 17}}, "response": {"id": {"type": "integer", "description": "Created ticket ID", "example": 81}, "ticket_code": {"type": "string", "description": "Ticket code", "example": "SUP-38491"}, "category": {"type": "string", "description": "Ticket category", "example": "fee_dispute"}, "subject": {"type": "string", "description": "Issue subject", "example": "Late Cancellation Fee Dispute"}, "description": {"type": "string", "description": "Issue details", "example": "Sitter canceled 2 hours before start; I was still charged a late fee"}, "status": {"type": "string", "description": "Ticket status", "example": "open"}, "booking_id": {"type": "integer", "description": "Related booking", "example": 10492}, "related_thread_id": {"type": "integer", "description": "Related message thread", "example": 17}}, "required_tables": ["support_tickets"], "required_fields": {"support_tickets": ["id", "ticket_code", "category", "subject", "description", "status", "booking_id", "related_thread_id"]}}]}]}}
{"scenario": "GoFundMe", "api_spec": {"api_groups": [{"group_name": "Campaigns", "endpoints": [{"path": "/api/campaigns", "method": "POST", "summary": "Create a new fundraising campaign", "description": "Create a campaign with a title, category, goal, beneficiary, location, and images for the current user.", "operation_id": "create_campaign", "tags": ["campaigns"], "request_params": {"title": {"type": "string", "param_type": "body", "required": true, "description": "Unique campaign title for the current user", "example": "Help Mayas Recovery"}, "category_name": {"type": "string", "param_type": "body", "required": true, "description": "Category name for the campaign", "example": "Medical"}, "goal_amount_usd": {"type": "float", "param_type": "body", "required": true, "description": "Goal amount in USD", "example": 12000.0}, "beneficiary_name": {"type": "string", "param_type": "body", "required": true, "description": "Beneficiary's name", "example": "Maya Hernandez"}, "location_city": {"type": "string", "param_type": "body", "required": true, "description": "Campaign city", "example": "Austin"}, "location_region": {"type": "string", "param_type": "body", "required": true, "description": "Campaign region/state", "example": "TX"}, "image_metadata": {"type": "array", "param_type": "body", "required": true, "description": "Array of image filename and alt text objects", "example": [{"filename": "maya-hospital.jpg", "alt": "Maya smiling in a hospital bed"}, {"filename": "family.jpg", "alt": "Maya with her family at home"}]}}, "response": {"campaign_id": {"type": "integer", "description": "Newly created campaign identifier", "example": 42}, "title": {"type": "string", "description": "Campaign title", "example": "Help Mayas Recovery"}, "status": {"type": "string", "description": "Campaign status", "example": "active"}, "created_at": {"type": "string", "description": "Datetime of creation", "example": "2026-01-18T12:34:56Z"}}, "required_tables": ["campaigns", "campaign_media", "categories"], "required_fields": {"campaigns": ["owner_user_id", "category_id", "title", "beneficiary_name", "location_city", "location_region", "goal_amount_cents", "currency_code"], "campaign_media": ["campaign_id", "filename", "alt_text", "sort_order"], "categories": ["name"]}}, {"path": "/api/campaigns/{campaign_id}", "method": "PATCH", "summary": "Update goal amount and location of a campaign", "description": "Update a campaign's goal amount and location fields. Use for changing funding goals or event locations.", "operation_id": "update_campaign_goal_and_location", "tags": ["campaigns"], "request_params": {"campaign_id": {"type": "integer", "param_type": "path", "required": true, "description": "Campaign identifier", "example": 42}, "goal_amount_usd": {"type": "float", "param_type": "body", "required": false, "description": "New goal amount in USD", "example": 15000.0}, "location_city": {"type": "string", "param_type": "body", "required": false, "description": "Updated city location", "example": "Round Rock"}, "location_region": {"type": "string", "param_type": "body", "required": false, "description": "Updated region/state location", "example": "TX"}}, "response": {"campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 42}, "title": {"type": "string", "description": "Campaign title", "example": "Help Mayas Recovery"}, "goal_amount_usd": {"type": "float", "description": "Updated goal in USD", "example": 15000.0}, "location_city": {"type": "string", "description": "Updated city", "example": "Round Rock"}, "location_region": {"type": "string", "description": "Updated region/state", "example": "TX"}, "updated_at": {"type": "string", "description": "Datetime campaign updated", "example": "2026-02-02T10:15:18Z"}}, "required_tables": ["campaigns"], "required_fields": {"campaigns": ["id", "goal_amount_cents", "location_city", "location_region"]}}, {"path": "/api/campaigns/{campaign_id}/updates", "method": "POST", "summary": "Post a campaign update", "description": "Add an update with a title and body to a campaign. Use for progress announcements or events.", "operation_id": "create_campaign_update", "tags": ["campaigns", "campaign_updates"], "request_params": {"campaign_id": {"type": "integer", "param_type": "path", "required": true, "description": "Campaign identifier", "example": 42}, "title": {"type": "string", "param_type": "body", "required": true, "description": "Update title", "example": "Surgery scheduled"}, "body": {"type": "string", "param_type": "body", "required": true, "description": "Update message/body text", "example": "Mayas surgery is scheduled for March 5th; thank you for the supportyour donations are covering pre-op tests and travel."}}, "response": {"update_id": {"type": "integer", "description": "Identifier for the new update", "example": 15}, "campaign_id": {"type": "integer", "description": "Related campaign ID", "example": 42}, "title": {"type": "string", "description": "Update title", "example": "Surgery scheduled"}, "body": {"type": "string", "description": "Update body", "example": "Mayas surgery is scheduled for March 5th; thank you for the supportyour donations are covering pre-op tests and travel."}, "created_at": {"type": "string", "description": "Datetime update posted", "example": "2026-02-03T05:15:10Z"}}, "required_tables": ["campaign_updates"], "required_fields": {"campaign_updates": ["campaign_id", "author_user_id", "title", "body"]}}, {"path": "/api/campaigns/search", "method": "GET", "summary": "Search campaigns by category and location", "description": "Find campaigns filtered by category name and city/region, sorted by amount raised descending.", "operation_id": "search_campaigns_by_category_location", "tags": ["campaigns"], "request_params": {"category_name": {"type": "string", "param_type": "query", "required": true, "description": "Campaign category name", "example": "Animals"}, "location_city": {"type": "string", "param_type": "query", "required": true, "description": "Campaign city", "example": "Seattle"}, "location_region": {"type": "string", "param_type": "query", "required": true, "description": "Campaign region/state", "example": "WA"}, "top_n": {"type": "integer", "param_type": "query", "required": false, "description": "Limit to top N campaigns", "example": 5}}, "response": {"campaigns": {"type": "array", "items": {"campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 13}, "title": {"type": "string", "description": "Campaign title", "example": "Rescue Dog Treatment"}, "category_name": {"type": "string", "description": "Category name", "example": "Animals"}, "location_city": {"type": "string", "description": "City", "example": "Seattle"}, "location_region": {"type": "string", "description": "Region/state", "example": "WA"}, "goal_amount_usd": {"type": "float", "description": "Funding goal in USD", "example": 5000.0}, "amount_raised_usd": {"type": "float", "description": "Total donations raised in USD", "example": 4200.0}, "status": {"type": "string", "description": "Campaign status", "example": "active"}}}}, "required_tables": ["campaigns", "categories", "donations"], "required_fields": {"campaigns": ["id", "title", "category_id", "location_city", "location_region", "goal_amount_cents", "status"], "categories": ["id", "name"], "donations": ["campaign_id", "amount_cents"]}}]}, {"group_name": "Donations", "endpoints": [{"path": "/api/donation_intents", "method": "POST", "summary": "Create a one-time donation intent for a campaign", "description": "Create a donation intent specifying campaign, donor name, amount, public message, and anonymity.", "operation_id": "create_one_time_donation_intent", "tags": ["donations", "donation_intents"], "request_params": {"campaign_title": {"type": "string", "param_type": "body", "required": true, "description": "Target campaign by title", "example": "Community Food Pantry Restock"}, "donor_name": {"type": "string", "param_type": "body", "required": true, "description": "Donor display name", "example": "Alex Kim"}, "message": {"type": "string", "param_type": "body", "required": false, "description": "Public message from donor", "example": "Happy to helpthank you for feeding our neighbors!"}, "amount_usd": {"type": "float", "param_type": "body", "required": true, "description": "Amount to donate in USD", "example": 75.0}, "is_anonymous": {"type": "boolean", "param_type": "body", "required": true, "description": "If true, donor is anonymous", "example": false}}, "response": {"donation_intent_id": {"type": "integer", "description": "New donation intent ID", "example": 54}, "campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 12}, "donor_name": {"type": "string", "description": "Donor public name", "example": "Alex Kim"}, "amount_usd": {"type": "float", "description": "Donation amount in USD", "example": 75.0}, "kind": {"type": "string", "description": "One-time or recurring", "example": "one_time"}, "status": {"type": "string", "description": "Intent status", "example": "active"}}, "required_tables": ["donation_intents", "campaigns"], "required_fields": {"donation_intents": ["campaign_id", "donor_user_id", "donor_name", "message", "is_anonymous", "kind", "currency_code", "amount_cents", "status"], "campaigns": ["id", "title"]}}, {"path": "/api/donation_intents", "method": "POST", "summary": "Create a recurring monthly donation intent for a campaign", "description": "Create a recurring donation intent including start date, interval info, donor details, and anonymity.", "operation_id": "create_recurring_donation_intent", "tags": ["donations", "donation_intents"], "request_params": {"campaign_title": {"type": "string", "param_type": "body", "required": true, "description": "Target campaign by title", "example": "Wildfire Relief for Sonoma"}, "donor_name": {"type": "string", "param_type": "body", "required": true, "description": "Donor display name", "example": "Jordan Patel"}, "message": {"type": "string", "param_type": "body", "required": false, "description": "Public message from donor", "example": "Stay strongsending continued support."}, "amount_usd": {"type": "float", "param_type": "body", "required": true, "description": "Monthly pledge amount in USD", "example": 20.0}, "is_anonymous": {"type": "boolean", "param_type": "body", "required": true, "description": "If true, donor is anonymous", "example": true}, "start_date": {"type": "string", "param_type": "body", "required": true, "description": "Recurring donation start date (YYYY-MM-DD)", "example": "2026-03-01"}, "interval_unit": {"type": "string", "param_type": "body", "required": true, "description": "Recurring interval unit", "example": "month"}, "interval_count": {"type": "integer", "param_type": "body", "required": true, "description": "How many intervals between donations", "example": 1}}, "response": {"donation_intent_id": {"type": "integer", "description": "New recurring donation intent ID", "example": 55}, "campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 14}, "donor_name": {"type": "string", "description": "Donor public name", "example": "Jordan Patel"}, "amount_usd": {"type": "float", "description": "Donation amount in USD", "example": 20.0}, "kind": {"type": "string", "description": "Donation kind (recurring)", "example": "recurring"}, "status": {"type": "string", "description": "Intent status", "example": "active"}, "start_date": {"type": "string", "description": "Start date of recurrence", "example": "2026-03-01"}, "interval_unit": {"type": "string", "description": "Interval unit", "example": "month"}, "interval_count": {"type": "integer", "description": "Interval count", "example": 1}}, "required_tables": ["donation_intents", "campaigns"], "required_fields": {"donation_intents": ["campaign_id", "donor_user_id", "donor_name", "message", "is_anonymous", "kind", "currency_code", "amount_cents", "status", "start_date", "interval_unit", "interval_count"], "campaigns": ["id", "title"]}}, {"path": "/api/donations/history", "method": "GET", "summary": "Fetch authenticated user's donation history for last 90 days", "description": "Get all donations made by the current user in the last 90 days, including campaign title, amount, date, and donation type.", "operation_id": "fetch_my_donation_history", "tags": ["donations"], "request_params": {}, "response": {"donations": {"type": "array", "items": {"donation_id": {"type": "integer", "description": "Unique donation ID", "example": 111}, "campaign_title": {"type": "string", "description": "Title of the campaign donated to", "example": "Community Food Pantry Restock"}, "amount_usd": {"type": "float", "description": "Donation amount in USD", "example": 75.0}, "donated_at": {"type": "string", "description": "Datetime donation was made", "example": "2026-01-20T16:26:00Z"}, "kind": {"type": "string", "description": "Donation kind (one_time or recurring)", "example": "one_time"}}}}, "required_tables": ["donations", "donation_intents", "campaigns"], "required_fields": {"donations": ["id", "campaign_id", "donor_user_id", "amount_cents", "donated_at", "donation_intent_id"], "campaigns": ["title"], "donation_intents": ["kind"]}}]}, {"group_name": "Receipts", "endpoints": [{"path": "/api/receipts", "method": "GET", "summary": "Generate donation receipt metadata", "description": "Fetch receipt metadata for a specific donation to a campaign by date and amount.", "operation_id": "fetch_donation_receipt_metadata", "tags": ["receipts"], "request_params": {"campaign_title": {"type": "string", "param_type": "query", "required": true, "description": "Title of campaign receiving the donation", "example": "Community Food Pantry Restock"}, "donation_date": {"type": "string", "param_type": "query", "required": true, "description": "Donation date, format YYYY-MM-DD", "example": "2026-01-20"}, "amount_usd": {"type": "float", "param_type": "query", "required": true, "description": "Donation amount in USD", "example": 75.0}}, "response": {"receipt_id": {"type": "integer", "description": "Unique receipt identifier", "example": 75}, "receipt_number": {"type": "string", "description": "Receipt number", "example": "RCPT-20260120-111"}, "issued_at": {"type": "string", "description": "Receipt issue datetime", "example": "2026-01-20T18:00:00Z"}, "total_usd": {"type": "float", "description": "Total receipt amount in USD", "example": 75.0}}, "required_tables": ["receipts", "donations", "campaigns"], "required_fields": {"receipts": ["id", "donation_id", "receipt_number", "issued_at", "total_amount_cents"], "donations": ["id", "campaign_id", "donor_user_id", "donated_at", "amount_cents"], "campaigns": ["title"]}}]}, {"group_name": "Payout Methods", "endpoints": [{"path": "/api/payout_methods", "method": "POST", "summary": "Add a new bank account payout method for user", "description": "Add a bank account payout method for the current user and return the details including default status.", "operation_id": "create_bank_account_payout_method", "tags": ["payout_methods"], "request_params": {"bank_name": {"type": "string", "param_type": "body", "required": true, "description": "Name of the bank", "example": "Chase"}, "account_last4": {"type": "string", "param_type": "body", "required": true, "description": "Last 4 digits of account number", "example": "1234"}, "account_type": {"type": "string", "param_type": "body", "required": true, "description": "Account type: checking/savings", "example": "checking"}, "is_default": {"type": "boolean", "param_type": "body", "required": false, "description": "Set payout method as default", "example": true}}, "response": {"payout_method_id": {"type": "integer", "description": "New payout method identifier", "example": 8}, "bank_name": {"type": "string", "description": "Bank name", "example": "Chase"}, "account_last4": {"type": "string", "description": "Last 4 of account number", "example": "1234"}, "account_type": {"type": "string", "description": "Account type", "example": "checking"}, "is_default": {"type": "boolean", "description": "Is this payout method default for user", "example": true}}, "required_tables": ["payout_methods"], "required_fields": {"payout_methods": ["owner_user_id", "type", "bank_name", "account_last4", "account_type", "is_default"]}}, {"path": "/api/campaigns/{campaign_id}/payout_settings", "method": "PUT", "summary": "Set default payout method for campaign", "description": "Configure payout settings for a campaign by setting the default payout method for withdrawals.", "operation_id": "set_campaign_default_payout_method", "tags": ["payout_methods", "campaigns"], "request_params": {"campaign_id": {"type": "integer", "param_type": "path", "required": true, "description": "Campaign identifier", "example": 42}, "payout_method_id": {"type": "integer", "param_type": "body", "required": true, "description": "Default payout method identifier", "example": 8}}, "response": {"campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 42}, "default_payout_method_id": {"type": "integer", "description": "Default payout method ID", "example": 8}, "updated_at": {"type": "string", "description": "Datetime payout settings updated", "example": "2026-01-19T11:15:23Z"}}, "required_tables": ["campaign_payout_settings"], "required_fields": {"campaign_payout_settings": ["campaign_id", "default_payout_method_id"]}}]}, {"group_name": "Payouts", "endpoints": [{"path": "/api/payouts", "method": "POST", "summary": "Request a payout from a campaign to default bank account", "description": "Request a payout for a campaign to the default payout method. Returns payout status and any risk/verification requirements.", "operation_id": "create_campaign_payout_to_default", "tags": ["payouts", "campaigns"], "request_params": {"campaign_id": {"type": "integer", "param_type": "body", "required": true, "description": "Campaign identifier", "example": 42}, "amount_usd": {"type": "float", "param_type": "body", "required": true, "description": "Amount to payout in USD", "example": 2500.0}}, "response": {"payout_id": {"type": "integer", "description": "New payout ID", "example": 25}, "campaign_id": {"type": "integer", "description": "Campaign identifier", "example": 42}, "payout_method_id": {"type": "integer", "description": "Payout method identifier", "example": 8}, "amount_usd": {"type": "float", "description": "Amount requested in USD", "example": 2500.0}, "status": {"type": "string", "description": "Payout status", "example": "pending"}, "risk_level": {"type": "string", "description": "Risk level classification", "example": "low"}, "risk_flags": {"type": "array", "items": {"flag": {"type": "string", "description": "Risk, fraud, or AML flag", "example": "large_withdrawal"}}}, "verification_required": {"type": "boolean", "description": "Are verification docs required?", "example": true}, "verification_requirements": {"type": "array", "items": {"requirement_type": {"type": "string", "description": "Verification type needed", "example": "identity_document"}, "status": {"type": "string", "description": "Requirement status", "example": "required"}, "notes": {"type": "string", "description": "Additional notes", "example": "Upload government ID"}}}}, "required_tables": ["payouts", "campaign_payout_settings", "payout_methods", "payout_verification_requirements"], "required_fields": {"payouts": ["campaign_id", "payout_method_id", "amount_cents", "currency_code", "status", "risk_level", "risk_flags_json", "verification_required"], "campaign_payout_settings": ["campaign_id", "default_payout_method_id"], "payout_methods": ["id"], "payout_verification_requirements": ["payout_id", "requirement_type", "status", "notes"]}}]}]}}
{"scenario": "DoorDash Drive (Delivery Tracking)", "api_spec": {"api_groups": [{"group_name": "Merchants", "endpoints": [{"path": "/api/merchants", "method": "GET", "summary": "List all merchants with optional name filter", "description": "Retrieve all merchants, optionally filter by name. Use to lookup merchant IDs by name.", "operation_id": "list_merchants", "tags": ["merchants"], "request_params": {"name": {"type": "string", "param_type": "query", "required": false, "description": "Filter merchants by exact name match", "example": "Bluebird Bakery"}}, "response": {"merchants": {"type": "array", "items": {"id": {"type": "integer", "description": "Merchant's unique ID", "example": 1}, "name": {"type": "string", "description": "Merchant business name", "example": "Bluebird Bakery"}, "created_at": {"type": "string", "description": "Creation datetime (ISO8601)", "example": "2024-06-11T08:10:00Z"}, "updated_at": {"type": "string", "description": "Last update datetime (ISO8601)", "example": "2024-06-11T09:00:00Z"}}}}, "required_tables": ["merchants"], "required_fields": {"merchants": ["id", "name", "created_at", "updated_at"]}}]}, {"group_name": "Merchant Locations", "endpoints": [{"path": "/api/merchant-locations", "method": "GET", "summary": "List merchant locations by merchant name or ID", "description": "Get all merchant locations for a given merchant name or merchant_id.", "operation_id": "list_merchant_locations", "tags": ["merchant_locations"], "request_params": {"merchant_id": {"type": "integer", "param_type": "query", "required": false, "description": "Merchant ID to filter locations", "example": 1}, "merchant_name": {"type": "string", "param_type": "query", "required": false, "description": "Merchant name (exact)", "example": "Bluebird Bakery"}}, "response": {"locations": {"type": "array", "items": {"id": {"type": "integer", "description": "Merchant location ID", "example": 2}, "merchant_id": {"type": "integer", "description": "Associated merchant ID", "example": 1}, "name": {"type": "string", "description": "Location name", "example": "Bluebird Bakery - Downtown"}, "pickup_address_id": {"type": "integer", "description": "Pickup address ID", "example": 5}}}}, "required_tables": ["merchant_locations"], "required_fields": {"merchant_locations": ["id", "merchant_id", "name", "pickup_address_id"]}}]}, {"group_name": "Addresses", "endpoints": [{"path": "/api/addresses", "method": "POST", "summary": "Create a new address entry", "description": "Create an address; use for pickup and dropoff locations for orders.", "operation_id": "create_address", "tags": ["addresses"], "request_params": {"line1": {"type": "string", "param_type": "body", "required": true, "description": "Street address line 1", "example": "1200 Market St"}, "line2": {"type": "string", "param_type": "body", "required": false, "description": "Street address line 2", "example": "Suite 101"}, "city": {"type": "string", "param_type": "body", "required": true, "description": "City", "example": "San Francisco"}, "state": {"type": "string", "param_type": "body", "required": true, "description": "State/Province", "example": "CA"}, "postal_code": {"type": "string", "param_type": "body", "required": true, "description": "Postal code", "example": "94102"}, "country": {"type": "string", "param_type": "body", "required": false, "description": "Country code (default US)", "example": "US"}, "formatted": {"type": "string", "param_type": "body", "required": false, "description": "Pre-formatted address (optional)", "example": "1200 Market St, San Francisco, CA 94102"}, "lat": {"type": "float", "param_type": "body", "required": false, "description": "Latitude", "example": 37.7763}, "lng": {"type": "float", "param_type": "body", "required": false, "description": "Longitude", "example": -122.4177}}, "response": {"id": {"type": "integer", "description": "New address ID", "example": 5}}, "required_tables": ["addresses"], "required_fields": {"addresses": ["id", "line1", "line2", "city", "state", "postal_code", "country", "formatted", "lat", "lng"]}}]}, {"group_name": "Delivery Orders", "endpoints": [{"path": "/api/delivery-orders", "method": "POST", "summary": "Create a new delivery order", "description": "Create a delivery order for a merchant, location, with pickup/dropoff information, delivery window, and instructions.", "operation_id": "create_delivery_order", "tags": ["delivery_orders"], "request_params": {"external_order_ref": {"type": "string", "param_type": "body", "required": false, "description": "External order reference for merchant", "example": "BB-10482"}, "merchant_id": {"type": "integer", "param_type": "body", "required": true, "description": "Merchant ID", "example": 1}, "merchant_location_id": {"type": "integer", "param_type": "body", "required": false, "description": "Merchant location ID", "example": 2}, "customer_id": {"type": "integer", "param_type": "body", "required": false, "description": "Customer ID (if available)", "example": 12}, "pickup_address_id": {"type": "integer", "param_type": "body", "required": true, "description": "Pickup address ID", "example": 5}, "dropoff_address_id": {"type": "integer", "param_type": "body", "required": true, "description": "Dropoff address ID", "example": 6}, "pickup_window_start": {"type": "string", "param_type": "body", "required": false, "description": "Pickup window start ISO8601", "example": "2024-06-11T14:00:00-07:00"}, "pickup_window_end": {"type": "string", "param_type": "body", "required": false, "description": "Pickup window end ISO8601", "example": "2024-06-11T15:00:00-07:00"}, "dropoff_window_start": {"type": "string", "param_type": "body", "required": false, "description": "Dropoff window start ISO8601", "example": "2024-06-11T14:20:00-07:00"}, "dropoff_window_end": {"type": "string", "param_type": "body", "required": false, "description": "Dropoff window end ISO8601", "example": "2024-06-11T15:30:00-07:00"}, "special_instructions": {"type": "string", "param_type": "body", "required": false, "description": "Special delivery instructions", "example": "Call on arrival; leave at front desk if no answer"}}, "response": {"id": {"type": "integer", "description": "Delivery order ID", "example": 101}}, "required_tables": ["delivery_orders"], "required_fields": {"delivery_orders": ["id", "external_order_ref", "merchant_id", "merchant_location_id", "pickup_address_id", "dropoff_address_id", "pickup_window_start", "pickup_window_end", "special_instructions"]}}, {"path": "/api/delivery-order-items", "method": "POST", "summary": "Add an item to a delivery order", "description": "Add a single item and quantity to an existing delivery order.", "operation_id": "add_delivery_order_item", "tags": ["delivery_orders", "order_items"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Delivery order ID", "example": 101}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Item name", "example": "Croissant"}, "quantity": {"type": "integer", "param_type": "body", "required": true, "description": "Quantity of item", "example": 6}}, "response": {"id": {"type": "integer", "description": "Delivery order item ID", "example": 1}}, "required_tables": ["delivery_order_items"], "required_fields": {"delivery_order_items": ["id", "order_id", "name", "quantity"]}}, {"path": "/api/delivery-orders", "method": "GET", "summary": "List delivery orders for a merchant", "description": "Get all delivery orders for a merchant filtered by creation time, with key fields for status board.", "operation_id": "list_delivery_orders_by_merchant", "tags": ["delivery_orders"], "request_params": {"merchant_id": {"type": "integer", "param_type": "query", "required": true, "description": "Merchant ID to filter orders", "example": 1}, "created_after": {"type": "string", "param_type": "query", "required": true, "description": "ISO8601 datetime; orders created after this", "example": "2024-06-10T15:00:00-07:00"}}, "response": {"orders": {"type": "array", "items": {"id": {"type": "integer", "description": "Order ID", "example": 101}, "external_order_ref": {"type": "string", "description": "Merchant's external order reference (if any)", "example": "BB-10482"}, "customer_full_name": {"type": "string", "description": "Customer's full name", "example": "Arjun Patel"}, "current_status": {"type": "string", "description": "Latest status of the order", "example": "en_route"}, "latest_eta": {"type": "string", "description": "Order's current ETA (ISO8601)", "example": "2024-06-11T14:42:00-07:00"}}}}, "required_tables": ["delivery_orders", "customers"], "required_fields": {"delivery_orders": ["id", "external_order_ref", "customer_id", "current_status", "latest_eta"], "customers": ["id", "full_name"]}}]}, {"group_name": "Dispatch Batches", "endpoints": [{"path": "/api/dispatch-batches", "method": "POST", "summary": "Create a new dispatch batch for a location", "description": "Create a dispatch batch for a location and pickup time window.", "operation_id": "create_dispatch_batch", "tags": ["dispatch_batches"], "request_params": {"merchant_location_id": {"type": "integer", "param_type": "body", "required": true, "description": "Merchant location ID", "example": 2}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Batch descriptive name", "example": "Downtown Afternoon Run"}, "pickup_window_start": {"type": "string", "param_type": "body", "required": false, "description": "Pickup window start (ISO8601)", "example": "2024-06-11T13:30:00-07:00"}, "pickup_window_end": {"type": "string", "param_type": "body", "required": false, "description": "Pickup window end (ISO8601)", "example": "2024-06-11T14:00:00-07:00"}}, "response": {"id": {"type": "integer", "description": "Dispatch batch ID", "example": 10}}, "required_tables": ["dispatch_batches"], "required_fields": {"dispatch_batches": ["id", "merchant_location_id", "name", "pickup_window_start", "pickup_window_end"]}}, {"path": "/api/dispatch-batch-orders", "method": "POST", "summary": "Add delivery order to a dispatch batch", "description": "Add a delivery order to an existing dispatch batch for bulk dispatch.", "operation_id": "add_order_to_dispatch_batch", "tags": ["dispatch_batches"], "request_params": {"batch_id": {"type": "integer", "param_type": "body", "required": true, "description": "Dispatch batch ID", "example": 10}, "order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Delivery order ID to batch", "example": 101}}, "response": {"success": {"type": "boolean", "description": "True if successful", "example": true}}, "required_tables": ["dispatch_batch_orders"], "required_fields": {"dispatch_batch_orders": ["batch_id", "order_id"]}}]}, {"group_name": "Drivers", "endpoints": [{"path": "/api/drivers", "method": "GET", "summary": "List drivers with optional filters for availability or location", "description": "List all drivers and optionally filter by display_name, status, active, or location box.", "operation_id": "list_drivers", "tags": ["drivers"], "request_params": {"display_name": {"type": "string", "param_type": "query", "required": false, "description": "Filter drivers by display name (exact match)", "example": "Miguel R."}, "is_active": {"type": "boolean", "param_type": "query", "required": false, "description": "Filter: Only active drivers if true", "example": true}, "availability_status": {"type": "string", "param_type": "query", "required": false, "description": "Driver status: available, unavailable, on_delivery", "example": "available"}}, "response": {"drivers": {"type": "array", "items": {"id": {"type": "integer", "description": "Driver ID", "example": 7}, "display_name": {"type": "string", "description": "Driver's display name", "example": "Miguel R."}, "availability_status": {"type": "string", "description": "Driver availability status", "example": "available"}, "last_known_lat": {"type": "float", "description": "Last known latitude", "example": 37.7751}, "last_known_lng": {"type": "float", "description": "Last known longitude", "example": -122.4149}, "last_known_at": {"type": "string", "description": "Timestamp of last known location (ISO8601)", "example": "2024-06-11T14:08:00-07:00"}}}}, "required_tables": ["drivers"], "required_fields": {"drivers": ["id", "display_name", "availability_status", "last_known_lat", "last_known_lng", "last_known_at"]}}, {"path": "/api/drivers/nearby", "method": "GET", "summary": "List available drivers near location", "description": "Get available, active drivers within a specified distance (miles) of a lat/lng point.", "operation_id": "list_available_drivers_nearby", "tags": ["drivers"], "request_params": {"lat": {"type": "float", "param_type": "query", "required": true, "description": "Latitude of the center point", "example": 37.7763}, "lng": {"type": "float", "param_type": "query", "required": true, "description": "Longitude of the center point", "example": -122.4177}, "radius_miles": {"type": "float", "param_type": "query", "required": true, "description": "Search radius in miles", "example": 3.0}}, "response": {"drivers": {"type": "array", "items": {"id": {"type": "integer", "description": "Driver ID", "example": 8}, "display_name": {"type": "string", "description": "Driver display name", "example": "Jamie C."}, "distance_miles": {"type": "float", "description": "Distance from the search point", "example": 2.8}, "last_known_lat": {"type": "float", "description": "Driver's latest latitude", "example": 37.7758}, "last_known_lng": {"type": "float", "description": "Driver's latest longitude", "example": -122.4125}}}}, "required_tables": ["drivers"], "required_fields": {"drivers": ["id", "display_name", "last_known_lat", "last_known_lng"]}}]}, {"group_name": "Order Assignments", "endpoints": [{"path": "/api/order-assignments", "method": "POST", "summary": "Assign a driver to an order", "description": "Assign an available driver to an order, specifying planned pickup time and note.", "operation_id": "assign_driver_to_order", "tags": ["order_assignments"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order ID to assign", "example": 101}, "driver_id": {"type": "integer", "param_type": "body", "required": true, "description": "Driver ID to assign", "example": 7}, "pickup_time_planned": {"type": "string", "param_type": "body", "required": false, "description": "Planned pickup time (ISO8601)", "example": "2024-06-11T14:10:00-07:00"}, "dispatch_note": {"type": "string", "param_type": "body", "required": false, "description": "Note for assigned driver on dispatch", "example": "Traffic on US-101; use surface streets"}}, "response": {"assignment_id": {"type": "integer", "description": "Primary key for the assignment", "example": 77}}, "required_tables": ["order_assignments"], "required_fields": {"order_assignments": ["id", "order_id", "driver_id", "pickup_time_planned", "dispatch_note", "is_current"]}}, {"path": "/api/order-assignments/{order_id}/unassign-current", "method": "POST", "summary": "Unassign current driver from order", "description": "Unset current driver assignment for an order, providing the unassignment reason.", "operation_id": "unassign_current_driver_from_order", "tags": ["order_assignments"], "request_params": {"order_id": {"type": "integer", "param_type": "path", "required": true, "description": "Order ID to unassign", "example": 101}, "unassigned_reason": {"type": "string", "param_type": "body", "required": true, "description": "Reason for unassignment", "example": "vehicle issue"}}, "response": {"success": {"type": "boolean", "description": "True if the assignment was unassigned", "example": true}}, "required_tables": ["order_assignments"], "required_fields": {"order_assignments": ["id", "order_id", "is_current", "unassigned_at", "unassigned_reason"]}}]}, {"group_name": "Order Status Events", "endpoints": [{"path": "/api/order-status-events", "method": "POST", "summary": "Create a status event for order timeline", "description": "Append a timeline status event for an order, such as picked_up, en_route, delivered, canceled, and notes.", "operation_id": "append_order_status_event", "tags": ["order_status_events"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Delivery order ID", "example": 101}, "status": {"type": "string", "param_type": "body", "required": true, "description": "Event status; must match schema constraint", "example": "picked_up"}, "event_time": {"type": "string", "param_type": "body", "required": true, "description": "Event time (ISO8601)", "example": "2024-06-11T14:18:00-07:00"}, "eta": {"type": "string", "param_type": "body", "required": false, "description": "Order's updated ETA (if status is en_route)", "example": "2024-06-11T14:42:00-07:00"}, "notes": {"type": "string", "param_type": "body", "required": false, "description": "Event notes", "example": "Order verified; 2 bags"}}, "response": {"id": {"type": "integer", "description": "New status event ID", "example": 1}}, "required_tables": ["order_status_events"], "required_fields": {"order_status_events": ["id", "order_id", "status", "event_time", "eta", "notes"]}}]}, {"group_name": "Order GPS Pings", "endpoints": [{"path": "/api/order-gps-pings/batch", "method": "POST", "summary": "Batch ingest GPS pings for an order", "description": "Write a batch of GPS pings for an order, generally from a driver app or agent tracking tool.", "operation_id": "batch_create_order_gps_pings", "tags": ["order_gps_pings"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order ID", "example": 101}, "pings": {"type": "array", "param_type": "body", "required": true, "description": "List of pings (lat, lng, timestamp, optional driver_id)", "example": [{"ping_time": "2024-06-11T14:20:00-07:00", "lat": 37.7765, "lng": -122.4172}, {"ping_time": "2024-06-11T14:22:00-07:00", "lat": 37.7751, "lng": -122.4149}]}}, "response": {"count": {"type": "integer", "description": "How many GPS pings were written", "example": 5}}, "required_tables": ["order_gps_pings"], "required_fields": {"order_gps_pings": ["order_id", "driver_id", "ping_time", "lat", "lng"]}}, {"path": "/api/delivery-orders/{order_id}/synth-eta", "method": "POST", "summary": "Recalculate synthesized ETA for an order", "description": "Re-evaluate or update the synthesized ETA for a delivery order based on latest GPS and timeline data.", "operation_id": "recalculate_order_eta", "tags": ["order_gps_pings", "delivery_orders"], "request_params": {"order_id": {"type": "integer", "param_type": "path", "required": true, "description": "Order ID to update ETA for", "example": 101}}, "response": {"latest_eta": {"type": "string", "description": "Updated ETA ISO8601", "example": "2024-06-11T14:42:00-07:00"}}, "required_tables": ["delivery_orders", "order_gps_pings"], "required_fields": {"delivery_orders": ["id", "latest_eta"]}}]}, {"group_name": "Proof of Delivery", "endpoints": [{"path": "/api/proof-of-delivery", "method": "POST", "summary": "Attach proof of delivery for an order", "description": "Record POD and attach photo metadata and/or recipient signature for an order.", "operation_id": "attach_proof_of_delivery", "tags": ["proof_of_delivery"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order ID", "example": 101}, "photo_url": {"type": "string", "param_type": "body", "required": false, "description": "Photo URL for POD", "example": "https://cdn.example.com/pod/bb-10482-1.jpg"}, "photo_timestamp": {"type": "string", "param_type": "body", "required": false, "description": "Photo timestamp (ISO8601)", "example": "2024-06-11T14:46:00-07:00"}, "photo_notes": {"type": "string", "param_type": "body", "required": false, "description": "Notes about the POD photo", "example": "Left at front desk"}, "recipient_signature_name": {"type": "string", "param_type": "body", "required": false, "description": "Name of person who signed (if available)", "example": "A. Patel"}}, "response": {"id": {"type": "integer", "description": "Proof of delivery record ID", "example": 22}}, "required_tables": ["proof_of_delivery"], "required_fields": {"proof_of_delivery": ["id", "order_id", "photo_url", "photo_timestamp", "photo_notes", "recipient_signature_name"]}}]}, {"group_name": "Refunds", "endpoints": [{"path": "/api/refunds", "method": "POST", "summary": "Issue a refund for delivery order", "description": "Create a refund for an order with amount and reason; used for full/partial refunds.", "operation_id": "issue_refund_for_order", "tags": ["refunds"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Order to refund", "example": 10501}, "amount_cents": {"type": "integer", "param_type": "body", "required": true, "description": "Refund amount in cents (e.g., 3860 = $38.60)", "example": 3860}, "currency": {"type": "string", "param_type": "body", "required": false, "description": "Currency code; default USD", "example": "USD"}, "reason": {"type": "string", "param_type": "body", "required": false, "description": "Reason for refund", "example": "store_closed"}}, "response": {"id": {"type": "integer", "description": "Refund record ID", "example": 4}}, "required_tables": ["refunds"], "required_fields": {"refunds": ["id", "order_id", "amount_cents", "currency", "reason"]}}]}, {"group_name": "Internal Notes", "endpoints": [{"path": "/api/internal-notes", "method": "POST", "summary": "Add an internal note to an order/batch/case", "description": "Attach an internal note to an entity (order, batch, support case) with current user as author.", "operation_id": "create_internal_note", "tags": ["internal_notes"], "request_params": {"entity_type": {"type": "string", "param_type": "body", "required": true, "description": "Entity type: order, batch, support_case", "example": "order"}, "entity_id": {"type": "integer", "param_type": "body", "required": true, "description": "ID of order, batch, or case", "example": 10501}, "note": {"type": "string", "param_type": "body", "required": true, "description": "Note content", "example": "Location closed early due to power outage"}}, "response": {"id": {"type": "integer", "description": "New note ID", "example": 21}}, "required_tables": ["internal_notes"], "required_fields": {"internal_notes": ["id", "entity_type", "entity_id", "author_user_id", "note"]}}]}, {"group_name": "Order Cancellations", "endpoints": [{"path": "/api/delivery-orders/{order_id}/cancel", "method": "POST", "summary": "Cancel a delivery order", "description": "Set the order status to canceled, specifying cancel reason and time.", "operation_id": "cancel_delivery_order", "tags": ["delivery_orders"], "request_params": {"order_id": {"type": "integer", "param_type": "path", "required": true, "description": "Order to cancel", "example": 10501}, "cancel_reason": {"type": "string", "param_type": "body", "required": true, "description": "Predefined or freeform cancel reason", "example": "store_closed"}, "canceled_at": {"type": "string", "param_type": "body", "required": true, "description": "Datetime canceled (ISO8601)", "example": "2024-06-11T17:12:00-07:00"}}, "response": {"success": {"type": "boolean", "description": "True if successfully canceled", "example": true}}, "required_tables": ["delivery_orders"], "required_fields": {"delivery_orders": ["id", "current_status", "canceled_at", "cancel_reason"]}}]}, {"group_name": "Support Cases", "endpoints": [{"path": "/api/support-cases", "method": "POST", "summary": "Create a support case for a delivery order", "description": "Open a support case for a delivery order with all required details and a customer message.", "operation_id": "create_support_case", "tags": ["support_cases"], "request_params": {"order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Associated delivery order ID", "example": 10490}, "channel": {"type": "string", "param_type": "body", "required": true, "description": "Contact channel (chat, email, phone)", "example": "chat"}, "customer_message": {"type": "string", "param_type": "body", "required": true, "description": "Message from the customer", "example": "Driver marked delivered but I didn't receive it at 901 Howard St Apt 12"}, "priority": {"type": "string", "param_type": "body", "required": true, "description": "Case priority (low, medium, high, urgent)", "example": "high"}, "resolution_code": {"type": "string", "param_type": "body", "required": false, "description": "Initial resolution code (if known)", "example": "not_received"}}, "response": {"id": {"type": "integer", "description": "Support case ID", "example": 20}}, "required_tables": ["support_cases"], "required_fields": {"support_cases": ["id", "order_id", "channel", "customer_message", "priority", "resolution_code", "created_by_user_id"]}}, {"path": "/api/support-case-notes", "method": "POST", "summary": "Add note to a support case", "description": "Append an escalation or internal note to a support case as part of resolution workflow.", "operation_id": "add_support_case_note", "tags": ["support_cases", "support_case_notes"], "request_params": {"case_id": {"type": "integer", "param_type": "body", "required": true, "description": "Support case ID", "example": 20}, "note": {"type": "string", "param_type": "body", "required": true, "description": "Note text", "example": "Check GPS drop point and POD photo; contact driver within 10 minutes"}}, "response": {"id": {"type": "integer", "description": "Support case note ID", "example": 11}}, "required_tables": ["support_case_notes"], "required_fields": {"support_case_notes": ["id", "case_id", "author_user_id", "note"]}}]}]}}
{"scenario": "Samsara (Fleet & Asset Maintenance Management)", "api_spec": {"api_groups": [{"group_name": "Vehicles", "endpoints": [{"path": "/api/vehicles", "method": "POST", "summary": "Create a new vehicle asset", "description": "Create a vehicle with VIN, name, license plate, odometer, and engine hours.", "operation_id": "create_vehicle", "tags": ["vehicles"], "request_params": {"vin": {"type": "string", "param_type": "body", "required": true, "description": "Vehicle Identification Number (11-17 chars)", "example": "1FTFW1E50JFB12345"}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Human-readable vehicle name", "example": "Truck-12"}, "license_plate": {"type": "string", "param_type": "body", "required": false, "description": "License plate number", "example": "CA-8XK219"}, "odometer_miles": {"type": "integer", "param_type": "body", "required": false, "description": "Current odometer in miles", "example": 48210}, "engine_hours": {"type": "float", "param_type": "body", "required": false, "description": "Current engine hours", "example": 2150.0}}, "response": {"id": {"type": "integer", "description": "Unique vehicle identifier", "example": 15}, "vin": {"type": "string", "description": "Vehicle Identification Number", "example": "1FTFW1E50JFB12345"}, "name": {"type": "string", "description": "Vehicle name", "example": "Truck-12"}, "license_plate": {"type": "string", "description": "License plate number", "example": "CA-8XK219"}, "odometer_miles": {"type": "integer", "description": "Current odometer in miles", "example": 48210}, "engine_hours": {"type": "float", "description": "Current engine hours", "example": 2150.0}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2026-02-17T09:13:00Z"}}, "required_tables": ["vehicles"], "required_fields": {"vehicles": ["id", "vin", "name", "license_plate", "odometer_miles", "engine_hours", "created_at"]}}, {"path": "/api/vehicles", "method": "GET", "summary": "List all vehicles", "description": "Retrieve all vehicle assets for the current user.", "operation_id": "list_vehicles", "tags": ["vehicles"], "request_params": {}, "response": {"vehicles": {"type": "array", "items": {"id": {"type": "integer", "description": "Vehicle identifier", "example": 15}, "vin": {"type": "string", "description": "Vehicle Identification Number", "example": "1FTFW1E50JFB12345"}, "name": {"type": "string", "description": "Vehicle name", "example": "Truck-12"}, "license_plate": {"type": "string", "description": "License plate number", "example": "CA-8XK219"}, "odometer_miles": {"type": "integer", "description": "Odometer value in miles", "example": 48210}, "engine_hours": {"type": "float", "description": "Engine hours", "example": 2150.0}, "created_at": {"type": "string", "description": "Created timestamp", "example": "2026-02-17T09:13:00Z"}}}}, "required_tables": ["vehicles"], "required_fields": {"vehicles": ["id", "vin", "name", "license_plate", "odometer_miles", "engine_hours", "created_at"]}}, {"path": "/api/vehicles/{vehicle_id}", "method": "GET", "summary": "Get vehicle by ID", "description": "Retrieve the details of a specific vehicle asset by its ID.", "operation_id": "get_vehicle", "tags": ["vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "path", "required": true, "description": "Unique vehicle identifier", "example": 15}}, "response": {"id": {"type": "integer", "description": "Vehicle identifier", "example": 15}, "vin": {"type": "string", "description": "VIN", "example": "1FTFW1E50JFB12345"}, "name": {"type": "string", "description": "Vehicle name", "example": "Truck-12"}, "license_plate": {"type": "string", "description": "License plate", "example": "CA-8XK219"}, "odometer_miles": {"type": "integer", "description": "Odometer in miles", "example": 48210}, "engine_hours": {"type": "float", "description": "Engine hours", "example": 2150.0}, "created_at": {"type": "string", "description": "Created timestamp", "example": "2026-02-17T09:13:00Z"}}, "required_tables": ["vehicles"], "required_fields": {"vehicles": ["id", "vin", "name", "license_plate", "odometer_miles", "engine_hours", "created_at"]}}]}, {"group_name": "Drivers", "endpoints": [{"path": "/api/drivers", "method": "GET", "summary": "List all drivers", "description": "Retrieve all drivers for the current user.", "operation_id": "list_drivers", "tags": ["drivers"], "request_params": {}, "response": {"drivers": {"type": "array", "items": {"id": {"type": "integer", "description": "Driver identifier", "example": 4}, "employee_id": {"type": "string", "description": "Employee unique id", "example": "D-1042"}, "full_name": {"type": "string", "description": "Driver full name", "example": "Maria Lopez"}, "created_at": {"type": "string", "description": "Created timestamp", "example": "2026-02-14T17:21:00Z"}, "updated_at": {"type": "string", "description": "Last updated timestamp", "example": "2026-02-14T17:21:00Z"}}}}, "required_tables": ["drivers"], "required_fields": {"drivers": ["id", "employee_id", "full_name", "created_at", "updated_at"]}}, {"path": "/api/drivers/{driver_id}", "method": "GET", "summary": "Get driver by ID", "description": "Retrieve the details of a driver by driver_id.", "operation_id": "get_driver", "tags": ["drivers"], "request_params": {"driver_id": {"type": "integer", "param_type": "path", "required": true, "description": "Driver identifier", "example": 4}}, "response": {"id": {"type": "integer", "description": "Driver identifier", "example": 4}, "employee_id": {"type": "string", "description": "Employee unique id", "example": "D-1042"}, "full_name": {"type": "string", "description": "Driver full name", "example": "Maria Lopez"}, "created_at": {"type": "string", "description": "Created timestamp", "example": "2026-02-14T17:21:00Z"}, "updated_at": {"type": "string", "description": "Last updated timestamp", "example": "2026-02-14T17:21:00Z"}}, "required_tables": ["drivers"], "required_fields": {"drivers": ["id", "employee_id", "full_name", "created_at", "updated_at"]}}]}, {"group_name": "Vehicle Driver Assignments", "endpoints": [{"path": "/api/vehicle_driver_assignments", "method": "POST", "summary": "Assign a driver to a vehicle", "description": "Create a driver assignment for a vehicle with effective start and optional end date.", "operation_id": "assign_driver_to_vehicle", "tags": ["vehicle_driver_assignments"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id to assign the driver to", "example": 15}, "driver_id": {"type": "integer", "param_type": "body", "required": true, "description": "Driver id to be assigned", "example": 4}, "effective_start_at": {"type": "string", "param_type": "body", "required": true, "description": "Assignment effective start (ISO8601)", "example": "2026-02-18T08:00:00-08:00"}, "effective_end_at": {"type": "string", "param_type": "body", "required": false, "description": "Assignment effective end (ISO8601), null for ongoing", "example": null}}, "response": {"id": {"type": "integer", "description": "Assignment identifier", "example": 2}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "driver_id": {"type": "integer", "description": "Driver id", "example": 4}, "effective_start_at": {"type": "string", "description": "Start time (ISO8601)", "example": "2026-02-18T08:00:00-08:00"}, "effective_end_at": {"type": "string", "description": "End time (ISO8601), null if ongoing", "example": null}}, "required_tables": ["vehicle_driver_assignments"], "required_fields": {"vehicle_driver_assignments": ["id", "vehicle_id", "driver_id", "effective_start_at", "effective_end_at"]}}, {"path": "/api/vehicle_driver_assignments", "method": "GET", "summary": "List all vehicle-driver assignments", "description": "List all driver assignments to vehicles for the current user.", "operation_id": "list_vehicle_driver_assignments", "tags": ["vehicle_driver_assignments"], "request_params": {}, "response": {"assignments": {"type": "array", "items": {"id": {"type": "integer", "description": "Assignment identifier", "example": 2}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "driver_id": {"type": "integer", "description": "Driver id", "example": 4}, "effective_start_at": {"type": "string", "description": "Start time (ISO8601)", "example": "2026-02-18T08:00:00-08:00"}, "effective_end_at": {"type": "string", "description": "End time (ISO8601), null if ongoing", "example": null}}}}, "required_tables": ["vehicle_driver_assignments"], "required_fields": {"vehicle_driver_assignments": ["id", "vehicle_id", "driver_id", "effective_start_at", "effective_end_at"]}}]}, {"group_name": "Geofences", "endpoints": [{"path": "/api/geofences", "method": "POST", "summary": "Create a new geofence (circular zone)", "description": "Define a new circular geofence with center, radius, and name.", "operation_id": "create_geofence_circle", "tags": ["geofences"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Geofence name (unique per user)", "example": "Oakland Yard"}, "center_lat": {"type": "float", "param_type": "body", "required": true, "description": "Latitude of center", "example": 37.8044}, "center_lng": {"type": "float", "param_type": "body", "required": true, "description": "Longitude of center", "example": -122.2711}, "radius_meters": {"type": "float", "param_type": "body", "required": true, "description": "Radius in meters", "example": 300.0}}, "response": {"id": {"type": "integer", "description": "Geofence identifier", "example": 5}, "name": {"type": "string", "description": "Geofence name", "example": "Oakland Yard"}, "type": {"type": "string", "description": "Type (always 'circle')", "example": "circle"}, "center_lat": {"type": "float", "description": "Latitude", "example": 37.8044}, "center_lng": {"type": "float", "description": "Longitude", "example": -122.2711}, "radius_meters": {"type": "float", "description": "Radius in meters", "example": 300.0}, "created_at": {"type": "string", "description": "Creation timestamp", "example": "2026-02-17T10:00:00Z"}}, "required_tables": ["geofences"], "required_fields": {"geofences": ["id", "name", "type", "center_lat", "center_lng", "radius_meters", "created_at"]}}, {"path": "/api/geofence_alert_rules", "method": "POST", "summary": "Enable geofence alerts for a vehicle", "description": "Create a geofence alert rule for a vehicle to alert on enter/exit.", "operation_id": "create_geofence_alert_rule", "tags": ["geofences", "geofence_alert_rules"], "request_params": {"geofence_id": {"type": "integer", "param_type": "body", "required": true, "description": "Geofence id", "example": 5}, "vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "alert_on_enter": {"type": "boolean", "param_type": "body", "required": false, "description": "Enable enter alert", "example": true}, "alert_on_exit": {"type": "boolean", "param_type": "body", "required": false, "description": "Enable exit alert", "example": true}, "enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Is this alert rule enabled", "example": true}}, "response": {"id": {"type": "integer", "description": "Geofence alert rule id", "example": 12}, "geofence_id": {"type": "integer", "description": "Geofence id", "example": 5}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "alert_on_enter": {"type": "boolean", "description": "Alert on entering geofence", "example": true}, "alert_on_exit": {"type": "boolean", "description": "Alert on exiting geofence", "example": true}, "enabled": {"type": "boolean", "description": "Current state (enabled/disabled)", "example": true}}, "required_tables": ["geofence_alert_rules"], "required_fields": {"geofence_alert_rules": ["id", "geofence_id", "vehicle_id", "alert_on_enter", "alert_on_exit", "enabled"]}}]}, {"group_name": "Vehicle Safety Settings", "endpoints": [{"path": "/api/vehicle_safety_settings", "method": "POST", "summary": "Create safety settings for a vehicle", "description": "Set speeding threshold, duration, idling limit, and alert severity for a vehicle.", "operation_id": "create_vehicle_safety_settings", "tags": ["vehicle_safety_settings", "vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "speeding_threshold_mph": {"type": "float", "param_type": "body", "required": false, "description": "Speed limit to trigger speeding event", "example": 70.0}, "speeding_min_duration_seconds": {"type": "integer", "param_type": "body", "required": false, "description": "Duration speeding must exceed threshold (seconds)", "example": 30}, "idling_threshold_minutes": {"type": "integer", "param_type": "body", "required": false, "description": "Max idling allowed (minutes)", "example": 8}, "severity": {"type": "string", "param_type": "body", "required": true, "description": "Severity (low/medium/high)", "example": "medium"}, "enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Settings enabled/disabled", "example": true}}, "response": {"id": {"type": "integer", "description": "Safety settings id", "example": 6}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "speeding_threshold_mph": {"type": "float", "description": "Speeding threshold", "example": 70.0}, "speeding_min_duration_seconds": {"type": "integer", "description": "Duration to trigger (secs)", "example": 30}, "idling_threshold_minutes": {"type": "integer", "description": "Idling max (minutes)", "example": 8}, "severity": {"type": "string", "description": "Severity", "example": "medium"}, "enabled": {"type": "boolean", "description": "Enabled", "example": true}}, "required_tables": ["vehicle_safety_settings"], "required_fields": {"vehicle_safety_settings": ["id", "vehicle_id", "speeding_threshold_mph", "speeding_min_duration_seconds", "idling_threshold_minutes", "severity", "enabled"]}}]}, {"group_name": "Trips & GPS Tracking", "endpoints": [{"path": "/api/trips", "method": "POST", "summary": "Create a new trip for a vehicle", "description": "Record a completed trip for a vehicle including driver, times, locations, events, and speeds.", "operation_id": "create_trip", "tags": ["trips"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "driver_id": {"type": "integer", "param_type": "body", "required": false, "description": "Driver id (if any)", "example": 4}, "start_at": {"type": "string", "param_type": "body", "required": true, "description": "Trip start time (ISO8601)", "example": "2026-02-17T06:10:00-08:00"}, "end_at": {"type": "string", "param_type": "body", "required": true, "description": "Trip end time (ISO8601), must be > start_at", "example": "2026-02-17T08:05:00-08:00"}, "start_lat": {"type": "float", "param_type": "body", "required": false, "description": "Start latitude", "example": 37.3382}, "start_lng": {"type": "float", "param_type": "body", "required": false, "description": "Start longitude", "example": -121.8863}, "end_lat": {"type": "float", "param_type": "body", "required": false, "description": "End latitude", "example": 37.8044}, "end_lng": {"type": "float", "param_type": "body", "required": false, "description": "End longitude", "example": -122.2711}, "avg_speed_mph": {"type": "float", "param_type": "body", "required": false, "description": "Average speed (mph)", "example": 52.0}, "max_speed_mph": {"type": "float", "param_type": "body", "required": false, "description": "Maximum speed (mph)", "example": 78.0}, "speeding_event_count": {"type": "integer", "param_type": "body", "required": false, "description": "Number of speeding events during trip", "example": 2}}, "response": {"id": {"type": "integer", "description": "Trip identifier", "example": 21}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "driver_id": {"type": "integer", "description": "Driver id", "example": 4}, "start_at": {"type": "string", "description": "Trip start", "example": "2026-02-17T06:10:00-08:00"}, "end_at": {"type": "string", "description": "Trip end", "example": "2026-02-17T08:05:00-08:00"}, "start_lat": {"type": "float", "description": "Start latitude", "example": 37.3382}, "start_lng": {"type": "float", "description": "Start longitude", "example": -121.8863}, "end_lat": {"type": "float", "description": "End latitude", "example": 37.8044}, "end_lng": {"type": "float", "description": "End longitude", "example": -122.2711}, "avg_speed_mph": {"type": "float", "description": "Average speed", "example": 52.0}, "max_speed_mph": {"type": "float", "description": "Max speed", "example": 78.0}, "speeding_event_count": {"type": "integer", "description": "Speeding event count", "example": 2}}, "required_tables": ["trips"], "required_fields": {"trips": ["id", "vehicle_id", "driver_id", "start_at", "end_at", "start_lat", "start_lng", "end_lat", "end_lng", "avg_speed_mph", "max_speed_mph", "speeding_event_count"]}}, {"path": "/api/trip_gps_points/bulk", "method": "POST", "summary": "Bulk insert trip GPS trace points", "description": "Insert array of GPS trace points for a trip, typically after creating trip record.", "operation_id": "bulk_insert_gps_points", "tags": ["trip_gps_points", "trips"], "request_params": {"trip_id": {"type": "integer", "param_type": "body", "required": true, "description": "Trip id", "example": 21}, "points": {"type": "array", "param_type": "body", "required": true, "description": "Array of GPS points with seq, recorded_at, lat, lng, speed_mph", "example": [{"seq": 0, "recorded_at": "2026-02-17T06:10:00-08:00", "lat": 37.3382, "lng": -121.8863, "speed_mph": 0.0}]}}, "response": {"inserted": {"type": "integer", "description": "Number of points inserted", "example": 18}, "point_ids": {"type": "array", "items": {"type": "integer", "description": "Inserted GPS point id", "example": 101}}}, "required_tables": ["trip_gps_points"], "required_fields": {"trip_gps_points": ["id", "trip_id", "seq", "recorded_at", "lat", "lng", "speed_mph"]}}]}, {"group_name": "Sensor Readings & Alerts", "endpoints": [{"path": "/api/sensor_readings/bulk", "method": "POST", "summary": "Bulk add sensor readings for a vehicle", "description": "Insert multiple time-series sensor readings for a vehicle including fuel and engine temp.", "operation_id": "bulk_insert_sensor_readings", "tags": ["sensor_readings", "vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "readings": {"type": "array", "param_type": "body", "required": true, "description": "Array of readings with recorded_at, fuel_level_pct, engine_temp_f", "example": [{"recorded_at": "2026-02-17T06:10:00-08:00", "fuel_level_pct": 62.0, "engine_temp_f": 188.0}]}}, "response": {"inserted": {"type": "integer", "description": "Number of sensor readings inserted", "example": 24}, "reading_ids": {"type": "array", "items": {"type": "integer", "description": "Inserted reading id", "example": 301}}}, "required_tables": ["sensor_readings"], "required_fields": {"sensor_readings": ["id", "vehicle_id", "recorded_at", "fuel_level_pct", "engine_temp_f"]}}, {"path": "/api/vehicle_alerts", "method": "POST", "summary": "Create a vehicle alert", "description": "Log an alert event for a vehicle (e.g. engine temp exceeded or speeding detected).", "operation_id": "create_vehicle_alert", "tags": ["vehicle_alerts", "vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "trip_id": {"type": "integer", "param_type": "body", "required": false, "description": "Trip id associated with alert (if any)", "example": 21}, "type": {"type": "string", "param_type": "body", "required": true, "description": "Alert type (speeding, idling, engine_temp, geofence_enter, geofence_exit)", "example": "engine_temp"}, "severity": {"type": "string", "param_type": "body", "required": true, "description": "Alert severity (low, medium, high)", "example": "medium"}, "start_at": {"type": "string", "param_type": "body", "required": true, "description": "Alert start timestamp (ISO8601)", "example": "2026-02-17T07:45:00-08:00"}, "end_at": {"type": "string", "param_type": "body", "required": false, "description": "Alert end (ISO8601), null if ongoing", "example": "2026-02-17T07:55:00-08:00"}, "message": {"type": "string", "param_type": "body", "required": false, "description": "Detailed alert message/context", "example": "Engine temp exceeded 210F for 10 minutes"}}, "response": {"id": {"type": "integer", "description": "Alert id", "example": 80}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "trip_id": {"type": "integer", "description": "Trip id", "example": 21}, "type": {"type": "string", "description": "Alert type", "example": "engine_temp"}, "severity": {"type": "string", "description": "Alert severity", "example": "medium"}, "start_at": {"type": "string", "description": "Alert start", "example": "2026-02-17T07:45:00-08:00"}, "end_at": {"type": "string", "description": "Alert end", "example": "2026-02-17T07:55:00-08:00"}, "message": {"type": "string", "description": "Details", "example": "Engine temp exceeded 210F for 10 minutes"}}, "required_tables": ["vehicle_alerts"], "required_fields": {"vehicle_alerts": ["id", "vehicle_id", "trip_id", "type", "severity", "start_at", "end_at", "message"]}}]}, {"group_name": "Maintenance Schedules & Work Orders", "endpoints": [{"path": "/api/maintenance_schedules", "method": "POST", "summary": "Create a preventive maintenance schedule", "description": "Define a recurring maintenance schedule for a vehicle by name, intervals, and due triggers.", "operation_id": "create_maintenance_schedule", "tags": ["maintenance_schedules", "vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id", "example": 15}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Schedule name", "example": "Oil Change"}, "interval_miles": {"type": "integer", "param_type": "body", "required": false, "description": "Interval in miles between events", "example": 7500}, "interval_engine_hours": {"type": "float", "param_type": "body", "required": false, "description": "Interval in engine hours between events", "example": 250.0}, "next_due_odometer_miles": {"type": "integer", "param_type": "body", "required": false, "description": "Next due at odometer reading", "example": 52500}, "next_due_engine_hours": {"type": "float", "param_type": "body", "required": false, "description": "Next due at engine hours", "example": 2350.0}, "due_soon_miles": {"type": "integer", "param_type": "body", "required": false, "description": "Miles before due to trigger notification", "example": 500}, "due_soon_engine_hours": {"type": "float", "param_type": "body", "required": false, "description": "Engine hours before due to trigger notification", "example": 20.0}, "enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Is schedule enabled", "example": true}}, "response": {"id": {"type": "integer", "description": "Schedule id", "example": 7}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "name": {"type": "string", "description": "Schedule name", "example": "Oil Change"}, "interval_miles": {"type": "integer", "description": "Interval in miles", "example": 7500}, "interval_engine_hours": {"type": "float", "description": "Interval in hours", "example": 250.0}, "next_due_odometer_miles": {"type": "integer", "description": "Next due at miles", "example": 52500}, "next_due_engine_hours": {"type": "float", "description": "Next due at engine hours", "example": 2350.0}, "due_soon_miles": {"type": "integer", "description": "Due soon miles trigger", "example": 500}, "due_soon_engine_hours": {"type": "float", "description": "Due soon engine hours trigger", "example": 20.0}, "enabled": {"type": "boolean", "description": "Schedule enabled", "example": true}}, "required_tables": ["maintenance_schedules"], "required_fields": {"maintenance_schedules": ["id", "vehicle_id", "name", "interval_miles", "interval_engine_hours", "next_due_odometer_miles", "next_due_engine_hours", "due_soon_miles", "due_soon_engine_hours", "enabled"]}}, {"path": "/api/vendors", "method": "POST", "summary": "Create a new vendor", "description": "Add a new vendor to be used in work orders or defect repairs.", "operation_id": "create_vendor", "tags": ["vendors"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Vendor name", "example": "Bay Area Fleet Service"}}, "response": {"id": {"type": "integer", "description": "Vendor id", "example": 3}, "name": {"type": "string", "description": "Vendor name", "example": "Bay Area Fleet Service"}}, "required_tables": ["vendors"], "required_fields": {"vendors": ["id", "name"]}}, {"path": "/api/work_orders", "method": "POST", "summary": "Create a work order for a vehicle", "description": "Open a work order with title, issue, priority, vendor, estimate, and dates.", "operation_id": "create_work_order", "tags": ["work_orders", "vehicles"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Vehicle id for repair", "example": 15}, "vendor_id": {"type": "integer", "param_type": "body", "required": false, "description": "Assigned vendor id", "example": 3}, "title": {"type": "string", "param_type": "body", "required": true, "description": "Work order title", "example": "Front brake pads replacement"}, "priority": {"type": "string", "param_type": "body", "required": true, "description": "Priority (low, medium, high, urgent)", "example": "high"}, "reported_issue": {"type": "string", "param_type": "body", "required": true, "description": "Issue reported/diagnosed", "example": "squealing when braking"}, "open_date": {"type": "string", "param_type": "body", "required": true, "description": "Work order initial open date (YYYY-MM-DD)", "example": "2026-02-16"}, "estimated_labor_cost": {"type": "float", "param_type": "body", "required": false, "description": "Expected labor charge", "example": 420.0}, "estimated_parts_cost": {"type": "float", "param_type": "body", "required": false, "description": "Estimated parts cost", "example": 180.0}}, "response": {"id": {"type": "integer", "description": "Work order id", "example": 10}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "vendor_id": {"type": "integer", "description": "Vendor id", "example": 3}, "title": {"type": "string", "description": "Work order title", "example": "Front brake pads replacement"}, "priority": {"type": "string", "description": "Priority", "example": "high"}, "reported_issue": {"type": "string", "description": "Reported issue", "example": "squealing when braking"}, "status": {"type": "string", "description": "Work order state ('open')", "example": "open"}, "open_date": {"type": "string", "description": "Date opened", "example": "2026-02-16"}, "estimated_labor_cost": {"type": "float", "description": "Est. labor cost", "example": 420.0}, "estimated_parts_cost": {"type": "float", "description": "Est. parts cost", "example": 180.0}}, "required_tables": ["work_orders"], "required_fields": {"work_orders": ["id", "vehicle_id", "vendor_id", "title", "priority", "reported_issue", "status", "open_date", "estimated_labor_cost", "estimated_parts_cost"]}}, {"path": "/api/work_order_line_items", "method": "POST", "summary": "Add a line item to a work order", "description": "Add a part or service line (with qty & cost) to the work order.", "operation_id": "add_work_order_line_item", "tags": ["work_order_line_items", "work_orders"], "request_params": {"work_order_id": {"type": "integer", "param_type": "body", "required": true, "description": "Work order id", "example": 10}, "description": {"type": "string", "param_type": "body", "required": true, "description": "Part/service line description", "example": "Brake pads set"}, "part_number": {"type": "string", "param_type": "body", "required": false, "description": "Part number or SKU (if known)", "example": "BP-4421"}, "quantity": {"type": "float", "param_type": "body", "required": true, "description": "Used quantity", "example": 1}, "unit_cost": {"type": "float", "param_type": "body", "required": true, "description": "Unit price for this line item", "example": 165.0}}, "response": {"id": {"type": "integer", "description": "Line item id", "example": 130}, "work_order_id": {"type": "integer", "description": "Work order id", "example": 10}, "description": {"type": "string", "description": "Description", "example": "Brake pads set"}, "part_number": {"type": "string", "description": "Part number", "example": "BP-4421"}, "quantity": {"type": "float", "description": "Qty used", "example": 1}, "unit_cost": {"type": "float", "description": "Unit cost", "example": 165.0}}, "required_tables": ["work_order_line_items"], "required_fields": {"work_order_line_items": ["id", "work_order_id", "description", "part_number", "quantity", "unit_cost"]}}, {"path": "/api/work_orders/{work_order_id}", "method": "PATCH", "summary": "Update and close work order", "description": "Set work order status to closed with actual labor/parts costs, odometer, date, and notes.", "operation_id": "close_work_order", "tags": ["work_orders"], "request_params": {"work_order_id": {"type": "integer", "param_type": "path", "required": true, "description": "Work order to close", "example": 10}, "status": {"type": "string", "param_type": "body", "required": true, "description": "New status ('closed')", "example": "closed"}, "actual_labor_cost": {"type": "float", "param_type": "body", "required": false, "description": "Final labor cost", "example": 395.0}, "odometer_at_repair_miles": {"type": "integer", "param_type": "body", "required": false, "description": "Odometer at completion", "example": 49020}, "close_date": {"type": "string", "param_type": "body", "required": true, "description": "Repair completion date", "example": "2026-02-18"}, "notes": {"type": "string", "param_type": "body", "required": false, "description": "Completion notes", "example": "test drive OK"}}, "response": {"id": {"type": "integer", "description": "Work order id", "example": 10}, "status": {"type": "string", "description": "Status after update", "example": "closed"}, "actual_labor_cost": {"type": "float", "description": "Final labor", "example": 395.0}, "odometer_at_repair_miles": {"type": "integer", "description": "Odometer", "example": 49020}, "close_date": {"type": "string", "description": "Completion date", "example": "2026-02-18"}, "notes": {"type": "string", "description": "Notes", "example": "test drive OK"}}, "required_tables": ["work_orders"], "required_fields": {"work_orders": ["id", "status", "actual_labor_cost", "odometer_at_repair_miles", "close_date", "notes"]}}]}, {"group_name": "DVIRs (Vehicle Inspections)", "endpoints": [{"path": "/api/dvirs", "method": "POST", "summary": "Submit a DVIR for a vehicle and driver", "description": "Submit a new Driver Vehicle Inspection Report (DVIR) for a date, vehicle, and driver.", "operation_id": "create_dvir", "tags": ["dvirs", "vehicles", "drivers"], "request_params": {"vehicle_id": {"type": "integer", "param_type": "body", "required": true, "description": "Inspected vehicle id", "example": 15}, "driver_id": {"type": "integer", "param_type": "body", "required": true, "description": "Reporting driver id", "example": 4}, "dvir_date": {"type": "string", "param_type": "body", "required": true, "description": "Inspection date (YYYY-MM-DD)", "example": "2026-02-18"}, "submitted_at": {"type": "string", "param_type": "body", "required": true, "description": "Submission datetime (ISO8601)", "example": "2026-02-18T09:00:00-08:00"}}, "response": {"id": {"type": "integer", "description": "DVIR id", "example": 32}, "vehicle_id": {"type": "integer", "description": "Vehicle id", "example": 15}, "driver_id": {"type": "integer", "description": "Driver id", "example": 4}, "dvir_date": {"type": "string", "description": "Inspection date", "example": "2026-02-18"}, "submitted_at": {"type": "string", "description": "Submitted at", "example": "2026-02-18T09:00:00-08:00"}, "manager_ack_at": {"type": "string", "description": "Manager acknowledged at (nullable)", "example": null}, "manager_ack_notes": {"type": "string", "description": "Manager notes (nullable)", "example": null}}, "required_tables": ["dvirs"], "required_fields": {"dvirs": ["id", "vehicle_id", "driver_id", "dvir_date", "submitted_at", "manager_ack_at", "manager_ack_notes"]}}, {"path": "/api/dvir_defects", "method": "POST", "summary": "Add a defect to a DVIR", "description": "Add a noted defect to a specific DVIR with severity.", "operation_id": "add_dvir_defect", "tags": ["dvir_defects", "dvirs"], "request_params": {"dvir_id": {"type": "integer", "param_type": "body", "required": true, "description": "DVIR id this defect is linked to", "example": 32}, "description": {"type": "string", "param_type": "body", "required": true, "description": "Defect description", "example": "left headlight out"}, "severity": {"type": "string", "param_type": "body", "required": true, "description": "Defect severity (minor/major)", "example": "major"}}, "response": {"id": {"type": "integer", "description": "Defect id", "example": 212}, "dvir_id": {"type": "integer", "description": "DVIR id", "example": 32}, "description": {"type": "string", "description": "Defect description", "example": "left headlight out"}, "severity": {"type": "string", "description": "Severity", "example": "major"}}, "required_tables": ["dvir_defects"], "required_fields": {"dvir_defects": ["id", "dvir_id", "description", "severity"]}}, {"path": "/api/dvirs/{dvir_id}/manager_ack", "method": "PATCH", "summary": "Acknowledge a DVIR (manager notes)", "description": "Add manager acknowledgment to a DVIR with timestamp and notes.", "operation_id": "manager_ack_dvir", "tags": ["dvirs"], "request_params": {"dvir_id": {"type": "integer", "param_type": "path", "required": true, "description": "DVIR id to acknowledge", "example": 32}, "manager_ack_at": {"type": "string", "param_type": "body", "required": true, "description": "Acknowledged datetime (ISO8601)", "example": "2026-02-18T11:00:00-08:00"}, "manager_ack_notes": {"type": "string", "param_type": "body", "required": true, "description": "Notes describing acknowledgment", "example": "maintenance scheduled"}}, "response": {"id": {"type": "integer", "description": "DVIR id", "example": 32}, "manager_ack_at": {"type": "string", "description": "Acknowledged at", "example": "2026-02-18T11:00:00-08:00"}, "manager_ack_notes": {"type": "string", "description": "Notes", "example": "maintenance scheduled"}}, "required_tables": ["dvirs"], "required_fields": {"dvirs": ["id", "manager_ack_at", "manager_ack_notes"]}}, {"path": "/api/dvir_defect_repairs", "method": "POST", "summary": "Log DVIR defect repair and verification", "description": "Record repair for a DVIR defect with vendor, repair/verification timestamps, cost, and notes.", "operation_id": "add_dvir_defect_repair", "tags": ["dvir_defect_repairs", "dvir_defects"], "request_params": {"dvir_defect_id": {"type": "integer", "param_type": "body", "required": true, "description": "DVIR defect id", "example": 212}, "vendor_id": {"type": "integer", "param_type": "body", "required": false, "description": "Vendor who performed/verified", "example": 3}, "repaired_at": {"type": "string", "param_type": "body", "required": false, "description": "Repair time (ISO8601, or null if not tracked)", "example": "2026-02-18T13:00:00-08:00"}, "verified_at": {"type": "string", "param_type": "body", "required": false, "description": "When defect was verified as complete", "example": "2026-02-18T13:15:00-08:00"}, "cost": {"type": "float", "param_type": "body", "required": false, "description": "Repair cost", "example": 48.0}, "notes": {"type": "string", "param_type": "body", "required": false, "description": "Additional notes/detail", "example": "Headlight replaced by vendor tech."}}, "response": {"id": {"type": "integer", "description": "Defect repair id", "example": 55}, "dvir_defect_id": {"type": "integer", "description": "DVIR defect id", "example": 212}, "vendor_id": {"type": "integer", "description": "Vendor id", "example": 3}, "repaired_at": {"type": "string", "description": "Repair time", "example": "2026-02-18T13:00:00-08:00"}, "verified_at": {"type": "string", "description": "Verified completion time", "example": "2026-02-18T13:15:00-08:00"}, "cost": {"type": "float", "description": "Repair cost", "example": 48.0}, "notes": {"type": "string", "description": "Notes", "example": "Headlight replaced by vendor tech."}}, "required_tables": ["dvir_defect_repairs"], "required_fields": {"dvir_defect_repairs": ["id", "dvir_defect_id", "vendor_id", "repaired_at", "verified_at", "cost", "notes"]}}]}]}}
{"scenario": "Fortnite Item Shop", "api_spec": {"api_groups": [{"group_name": "ShopOffers", "endpoints": [{"path": "/api/shop_offers/active", "method": "GET", "summary": "List all current Shop offers for NA-East", "description": "Get all shop_offers valid now for region NA-East with item/bundle name, rarity, category, price, time remaining.", "operation_id": "list_active_shop_offers_na_east", "tags": ["shop_offers"], "request_params": {}, "response": {"offers": {"type": "array", "items": {"offer_id": {"type": "integer", "description": "shop_offers.id", "example": 101}, "name": {"type": "string", "description": "items.name or bundle name", "example": "Galaxy Scout"}, "rarity": {"type": "string", "description": "items.rarity", "example": "Epic"}, "category": {"type": "string", "description": "items.category", "example": "Outfit"}, "price_vbucks": {"type": "integer", "description": "shop_offers.price_vbucks", "example": 1200}, "time_remaining_seconds": {"type": "integer", "description": "Seconds till shop_offers.ends_at", "example": 3600}}}}, "required_tables": ["shop_offers", "regions", "items", "bundles"], "required_fields": {"shop_offers": ["id", "price_vbucks", "region_id", "offered_item_id", "ends_at"], "regions": ["code"], "items": ["name", "rarity", "category"], "bundles": ["item_id"]}}, {"path": "/api/shop_offers/filter", "method": "GET", "summary": "Filter current shop for Outfits Epic/Legendary, sort, return cheapest 3", "description": "Return cheapest 3 Outfits in NA-East, rarity Epic/Legendary, sorted by price ascending, with offer id, name, and price.", "operation_id": "filter_shop_offers_outfit_epic_legendary_cheapest", "tags": ["shop_offers"], "request_params": {}, "response": {"offers": {"type": "array", "items": {"offer_id": {"type": "integer", "description": "shop_offers.id", "example": 113}, "name": {"type": "string", "description": "items.name", "example": "Shadow Ops"}, "price_vbucks": {"type": "integer", "description": "shop_offers.price_vbucks", "example": 800}}}}, "required_tables": ["shop_offers", "items", "regions"], "required_fields": {"shop_offers": ["id", "region_id", "price_vbucks", "offered_item_id", "ends_at"], "items": ["name", "category", "rarity"], "regions": ["code"]}}, {"path": "/api/shop_offers/offer_by_name", "method": "GET", "summary": "Fetch Shop offer ID by item/bundle name in NA-East region", "description": "Get current shop_offers.id for given item/bundle name in region NA-East. Use for downstream purchase/gift actions.", "operation_id": "get_offer_id_by_name_na_east", "tags": ["shop_offers"], "request_params": {"name": {"type": "string", "param_type": "query", "required": true, "description": "Item or bundle name", "example": "Crimson Strike"}}, "response": {"offer_id": {"type": "integer", "description": "Shop offer id for named item/bundle, or null if not found", "example": 109}, "price_vbucks": {"type": "integer", "description": "shop_offers.price_vbucks", "example": 500}}, "required_tables": ["shop_offers", "items", "regions"], "required_fields": {"shop_offers": ["id", "price_vbucks", "offered_item_id", "region_id", "ends_at"], "items": ["name"], "regions": ["code"]}}]}, {"group_name": "Items", "endpoints": [{"path": "/api/items/preview_metadata", "method": "GET", "summary": "Fetch full preview metadata for item/bundle by name", "description": "Get description, rarity, set_name, all variants, and image URLs for named item or bundle in the database.", "operation_id": "get_item_preview_metadata_by_name", "tags": ["items"], "request_params": {"name": {"type": "string", "param_type": "query", "required": true, "description": "Item or bundle name", "example": "Crimson Strike"}}, "response": {"item": {"type": "object", "fields": {"id": {"type": "integer", "description": "items.id", "example": 208}, "name": {"type": "string", "description": "items.name", "example": "Crimson Strike"}, "description": {"type": "string", "description": "items.description", "example": "A bold crimson streak!"}, "rarity": {"type": "string", "description": "items.rarity", "example": "Rare"}, "set_name": {"type": "string", "description": "items.set_name", "example": "Strike Set"}, "included_variants": {"type": "array", "items": {"variant_name": {"type": "string", "description": "item_variants.variant_name", "example": "Red Glow"}, "variant_type": {"type": "string", "description": "item_variants.variant_type", "example": "Style"}}}, "image_urls": {"type": "array", "items": {"image_type": {"type": "string", "description": "item_images.image_type", "example": "icon"}, "url": {"type": "string", "description": "item_images.url", "example": "https://cdn.fortnite.com/crimson_strike_icon.png"}, "width": {"type": "integer", "description": "item_images.width", "example": 512}, "height": {"type": "integer", "description": "item_images.height", "example": 512}}}}}}, "required_tables": ["items", "item_variants", "item_images"], "required_fields": {"items": ["id", "name", "description", "rarity", "set_name"], "item_variants": ["variant_name", "variant_type"], "item_images": ["image_type", "url", "width", "height"]}}]}, {"group_name": "Purchases", "endpoints": [{"path": "/api/purchases", "method": "POST", "summary": "Purchase a shop offer using V-Bucks wallet", "description": "Buy a shop_offers item for user_id=1 from V-Bucks, return receipt, post-purchase balance, new entitlement item id(s).", "operation_id": "purchase_shop_offer", "tags": ["purchases"], "request_params": {"offer_id": {"type": "integer", "param_type": "body", "required": true, "description": "shop_offers.id to purchase", "example": 121}}, "response": {"receipt_id": {"type": "integer", "description": "purchase_receipts.id", "example": 501}, "total_charged_vbucks": {"type": "integer", "description": "Total deducted V-Bucks", "example": 500}, "wallet_balance_vbucks": {"type": "integer", "description": "Wallet balance after purchase", "example": 1250}, "entitlements": {"type": "array", "items": {"entitlement_id": {"type": "integer", "description": "entitlements.id", "example": 3012}, "item_id": {"type": "integer", "description": "items.id", "example": 211}, "item_name": {"type": "string", "description": "items.name", "example": "Nebula Wrap"}}}}, "required_tables": ["purchase_receipts", "wallets", "wallet_ledger", "entitlements", "purchase_receipt_items"], "required_fields": {"purchase_receipts": ["id", "total_charged_vbucks", "user_id", "offer_id", "status"], "wallets": ["balance_vbucks", "user_id"], "entitlements": ["id", "item_id", "user_id"], "items": ["name"]}}]}, {"group_name": "Gifts", "endpoints": [{"path": "/api/gifts", "method": "POST", "summary": "Gift a shop offer to a friend with custom message", "description": "Gift a shop_offers item to a friend, deduct V-Bucks, create gift_transaction, return transaction id and delivery status.", "operation_id": "gift_shop_offer_to_friend", "tags": ["gifts"], "request_params": {"offer_id": {"type": "integer", "param_type": "body", "required": true, "description": "shop_offers.id of the item to gift", "example": 130}, "friend_username": {"type": "string", "param_type": "body", "required": true, "description": "Recipient friend's username", "example": "PlayerTwo42"}, "message": {"type": "string", "param_type": "body", "required": false, "description": "Gift message, optional", "example": "Happy drops! Enjoy this emote."}}, "response": {"gift_transaction_id": {"type": "integer", "description": "gift_transactions.id", "example": 520}, "delivery_status": {"type": "string", "description": "gift_transactions.status", "example": "delivered"}}, "required_tables": ["gift_transactions", "wallets", "wallet_ledger", "friends"], "required_fields": {"gift_transactions": ["id", "status", "sender_user_id", "recipient_user_id", "offer_id", "message"], "friends": ["user_id", "friend_user_id", "status"], "wallets": ["balance_vbucks", "user_id"]}}]}, {"group_name": "Wishlists", "endpoints": [{"path": "/api/wishlists/items", "method": "POST", "summary": "Add one or more items to authenticated user wishlist", "description": "Add specified items to the user's wishlist, then return updated wishlist with item ids, names, and shop presence.", "operation_id": "add_items_to_wishlist", "tags": ["wishlists"], "request_params": {"item_names": {"type": "array", "param_type": "body", "required": true, "description": "Names of the items to add to wishlist", "example": ["Galaxy Scout", "Star Wand"]}}, "response": {"wishlist_items": {"type": "array", "items": {"item_id": {"type": "integer", "description": "items.id on wishlist", "example": 210}, "item_name": {"type": "string", "description": "items.name", "example": "Galaxy Scout"}, "is_in_shop": {"type": "boolean", "description": "True if item is currently in NA-East shop_offers", "example": true}}}}, "required_tables": ["wishlists", "wishlist_items", "items", "shop_offers", "regions"], "required_fields": {"wishlists": ["id", "user_id"], "wishlist_items": ["item_id"], "items": ["id", "name"], "shop_offers": ["offered_item_id", "region_id", "ends_at"], "regions": ["code"]}}]}, {"group_name": "Compliance", "endpoints": [{"path": "/api/compliance/purchase_check", "method": "POST", "summary": "Check purchase against parental spending limits and report errors", "description": "Checks purchase offer id against parental_controls for user_id=1, returns first blocking rule/error if present.", "operation_id": "check_purchase_compliance", "tags": ["compliance"], "request_params": {"offer_id": {"type": "integer", "param_type": "body", "required": true, "description": "shop_offers.id of offer to check", "example": 140}}, "response": {"blocked": {"type": "boolean", "description": "True if purchase is blocked", "example": true}, "error_details": {"type": "object", "fields": {"rule_code": {"type": "string", "description": "Rule code that blocked", "example": "SPEND_LIMIT_EXCEEDED"}, "rule_description": {"type": "string", "description": "Human readable description", "example": "Spending limit exceeded by 100 V-Bucks"}, "context_json": {"type": "string", "description": "More context about the compliance error", "example": "{\"spend_remaining_vbucks\":500,\"bundle_cost_vbucks\":600}"}}}}, "required_tables": ["compliance_errors", "parental_controls", "shop_offers"], "required_fields": {"compliance_errors": ["rule_code", "rule_description", "context_json"], "parental_controls": ["user_id", "spend_remaining_vbucks", "spend_limit_vbucks"], "shop_offers": ["id", "price_vbucks"]}}]}, {"group_name": "Refunds", "endpoints": [{"path": "/api/refunds/recent_purchase", "method": "POST", "summary": "Refund the most recent eligible purchase using one refund token", "description": "Refunds most recent purchase_receipt not yet refunded, reverses entitlements, restores V-Bucks, returns refund id, tokens left, new balance.", "operation_id": "refund_most_recent_eligible_purchase", "tags": ["refunds"], "request_params": {}, "response": {"refund_transaction_id": {"type": "integer", "description": "refund_transactions.id", "example": 602}, "tokens_remaining": {"type": "integer", "description": "refund_tokens.tokens_remaining now", "example": 1}, "updated_wallet_balance_vbucks": {"type": "integer", "description": "Wallet balance after refund", "example": 1500}}, "required_tables": ["refund_transactions", "purchase_receipts", "refund_tokens", "wallets", "entitlements", "refund_transaction_entitlements"], "required_fields": {"refund_transactions": ["id", "status", "user_id", "purchase_receipt_id"], "refund_tokens": ["tokens_remaining"], "wallets": ["balance_vbucks"], "entitlements": ["id", "user_id", "item_id", "revoked_at"]}}]}, {"group_name": "PriceAlerts", "endpoints": [{"path": "/api/price_alert_rules", "method": "POST", "summary": "Create a price alert rule for a wishlist item", "description": "Adds a new price_alert_rules row for user_id=1 for given item at price, returns rule id and parameters.", "operation_id": "create_price_alert_rule_for_item", "tags": ["price_alerts"], "request_params": {"item_name": {"type": "string", "param_type": "body", "required": true, "description": "items.name for alert", "example": "Star Wand"}, "max_price_vbucks": {"type": "integer", "param_type": "body", "required": true, "description": "Maximum alert price (V-Bucks)", "example": 800}}, "response": {"rule_id": {"type": "integer", "description": "price_alert_rules.id", "example": 710}, "item_id": {"type": "integer", "description": "items.id", "example": 212}, "region_id": {"type": "integer", "description": "regions.id (always NA-East)", "example": 1}, "max_price_vbucks": {"type": "integer", "description": "Maximum price threshold for alert", "example": 800}, "is_active": {"type": "boolean", "description": "Whether alert rule is active", "example": true}}, "required_tables": ["price_alert_rules", "items", "regions"], "required_fields": {"price_alert_rules": ["id", "user_id", "item_id", "region_id", "max_price_vbucks", "is_active"], "items": ["id", "name"], "regions": ["id", "code"]}}]}, {"group_name": "UserStats", "endpoints": [{"path": "/api/user_stats/purchase_summary", "method": "GET", "summary": "Generate purchase history summary for last 30 days", "description": "Returns V-Bucks spent, num purchases, gifts sent, and category breakdown for user_id=1 in last 30 days.", "operation_id": "get_personal_purchase_summary_last_30_days", "tags": ["user_stats"], "request_params": {}, "response": {"total_vbucks_spent": {"type": "integer", "description": "Total V-Bucks spent (completed purchases and gifts)", "example": 8300}, "purchase_count": {"type": "integer", "description": "Number of completed purchase_receipts", "example": 10}, "gift_count": {"type": "integer", "description": "Number of gifts sent via gift_transactions", "example": 3}, "category_breakdown": {"type": "object", "fields": {"Outfit": {"type": "integer", "description": "Count of Outfit purchases/gifts", "example": 4}, "Emote": {"type": "integer", "description": "Count of Emote purchases/gifts", "example": 3}, "Wrap": {"type": "integer", "description": "Count of Wrap purchases/gifts", "example": 2}, "Bundle": {"type": "integer", "description": "Count of Bundle purchases/gifts", "example": 4}}}}, "required_tables": ["purchase_receipts", "gift_transactions", "purchase_receipt_items", "gift_transaction_items", "items"], "required_fields": {"purchase_receipts": ["id", "user_id", "purchased_at", "status", "total_charged_vbucks"], "gift_transactions": ["id", "sender_user_id", "created_at", "total_charged_vbucks", "status"], "purchase_receipt_items": ["item_id", "receipt_id"], "gift_transaction_items": ["item_id", "gift_transaction_id"], "items": ["id", "category"]}}]}]}}
{"scenario": "DocuSign (E-Signature & Agreement Workflow)", "api_spec": {"api_groups": [{"group_name": "Envelopes", "endpoints": [{"path": "/api/envelopes", "method": "POST", "summary": "Create a new envelope", "description": "Create a new envelope owned by the current user with optional template or document attachments.", "operation_id": "create_envelope", "tags": ["envelopes"], "request_params": {"title": {"type": "string", "param_type": "body", "required": true, "description": "Envelope title", "example": "NDA - Acme Vendor - Feb 2026"}, "subject": {"type": "string", "param_type": "body", "required": false, "description": "Email subject for envelope notification", "example": "Please sign: Mutual NDA"}, "email_message": {"type": "string", "param_type": "body", "required": false, "description": "Custom email body message", "example": "Hi Alice, please sign by Friday so we can proceed."}, "status": {"type": "string", "param_type": "body", "required": true, "description": "Initial envelope status", "example": "Created"}, "source_type": {"type": "string", "param_type": "body", "required": true, "description": "Source type for envelope", "example": "template"}, "template_id": {"type": "integer", "param_type": "body", "required": false, "description": "Template to use for envelope", "example": 2}, "expires_at": {"type": "string", "param_type": "body", "required": false, "description": "Envelope expiration date/time (ISO8601)", "example": "2026-02-12T23:59:59Z"}, "reminder_enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Enable reminders", "example": true}, "reminder_interval_days": {"type": "integer", "param_type": "body", "required": false, "description": "Reminder interval in days", "example": 2}}, "response": {"envelope_id": {"type": "integer", "description": "Unique envelope identifier", "example": 10}, "status": {"type": "string", "description": "Envelope current status", "example": "Created"}, "title": {"type": "string", "description": "Envelope title", "example": "NDA - Acme Vendor - Feb 2026"}, "owner_user_id": {"type": "integer", "description": "Envelope owner (always user_id=1)", "example": 1}}, "required_tables": ["envelopes"], "required_fields": {"envelopes": ["id", "owner_user_id", "title", "status", "source_type", "template_id", "subject", "email_message", "expires_at"]}}, {"path": "/api/envelopes/{envelope_id}/documents", "method": "POST", "summary": "Attach a document to an envelope", "description": "Upload a PDF or attach a document to the specified envelope.", "operation_id": "add_envelope_document", "tags": ["envelope_documents"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 20}, "filename": {"type": "string", "param_type": "body", "required": true, "description": "Document filename", "example": "Consulting_SOW_Q2_2026.pdf"}, "mime_type": {"type": "string", "param_type": "body", "required": false, "description": "MIME type of document", "example": "application/pdf"}, "content_blob": {"type": "string", "param_type": "body", "required": false, "description": "Base64-encoded document binary content", "example": "<base64>"}, "storage_mode": {"type": "string", "param_type": "body", "required": false, "description": "Storage mode", "example": "upload"}}, "response": {"document_id": {"type": "integer", "description": "Unique document identifier", "example": 40}, "envelope_id": {"type": "integer", "description": "Envelope ID", "example": 20}, "doc_order": {"type": "integer", "description": "Document order within envelope", "example": 1}}, "required_tables": ["documents", "envelope_documents"], "required_fields": {"documents": ["id", "filename", "mime_type", "storage_mode", "content_blob", "owner_user_id"], "envelope_documents": ["envelope_id", "document_id", "doc_order"]}}, {"path": "/api/envelopes/{envelope_id}/recipients", "method": "POST", "summary": "Add a recipient to an envelope", "description": "Add a recipient (Signer, Approver, CC) to an envelope with optional routing order.", "operation_id": "add_envelope_recipient", "tags": ["envelope_recipients"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 10}, "role": {"type": "string", "param_type": "body", "required": true, "description": "Recipient role", "example": "Signer"}, "routing_order": {"type": "integer", "param_type": "body", "required": true, "description": "Order for signing/approval", "example": 1}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Recipient full name", "example": "Alice Nguyen"}, "email": {"type": "string", "param_type": "body", "required": true, "description": "Recipient email address", "example": "alice.nguyen@example.com"}, "auth_method": {"type": "string", "param_type": "body", "required": false, "description": "Authentication method", "example": "sms"}, "auth_required": {"type": "boolean", "param_type": "body", "required": false, "description": "Require authentication for recipient", "example": true}, "sms_phone": {"type": "string", "param_type": "body", "required": false, "description": "SMS phone for recipient authentication", "example": "+1-415-555-0199"}}, "response": {"recipient_id": {"type": "integer", "description": "Unique recipient identifier", "example": 125}, "envelope_id": {"type": "integer", "description": "Envelope ID", "example": 10}, "role": {"type": "string", "description": "Recipient role", "example": "Signer"}, "routing_order": {"type": "integer", "description": "Signing order", "example": 1}, "name": {"type": "string", "description": "Recipient name", "example": "Alice Nguyen"}, "email": {"type": "string", "description": "Recipient email", "example": "alice.nguyen@example.com"}, "status": {"type": "string", "description": "Recipient workflow status", "example": "Created"}}, "required_tables": ["envelope_recipients"], "required_fields": {"envelope_recipients": ["id", "envelope_id", "role", "routing_order", "name", "email", "status", "sms_phone", "auth_method", "auth_required"]}}, {"path": "/api/envelopes/{envelope_id}/tabs", "method": "POST", "summary": "Add a tab (field) to an envelope for a recipient", "description": "Add a tab such as signature, date signed, text input or checkbox for a recipient in an envelope.", "operation_id": "add_envelope_tab", "tags": ["tabs"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 20}, "recipient_id": {"type": "integer", "param_type": "body", "required": true, "description": "Recipient ID", "example": 222}, "tab_type": {"type": "string", "param_type": "body", "required": true, "description": "Type of tab (field)", "example": "signature"}, "label": {"type": "string", "param_type": "body", "required": false, "description": "Tab label", "example": "Company Name"}, "required": {"type": "boolean", "param_type": "body", "required": false, "description": "Tab is required", "example": true}, "anchor_text": {"type": "string", "param_type": "body", "required": false, "description": "Anchor text for field placement", "example": "/CLIENT_LEGAL_NAME/"}, "anchor_offset_x": {"type": "integer", "param_type": "body", "required": false, "description": "X offset from anchor text", "example": 10}, "anchor_offset_y": {"type": "integer", "param_type": "body", "required": false, "description": "Y offset from anchor text", "example": 0}, "max_length": {"type": "integer", "param_type": "body", "required": false, "description": "Max length for text input", "example": 80}, "default_value": {"type": "string", "param_type": "body", "required": false, "description": "Default value", "example": ""}, "checked": {"type": "boolean", "param_type": "body", "required": false, "description": "Checkbox checked by default", "example": false}, "group_id": {"type": "integer", "param_type": "body", "required": false, "description": "Associated tab group ID", "example": 301}}, "response": {"tab_id": {"type": "integer", "description": "Unique envelope tab identifier", "example": 1402}, "envelope_id": {"type": "integer", "description": "Envelope ID", "example": 20}, "recipient_id": {"type": "integer", "description": "Recipient ID", "example": 222}, "tab_type": {"type": "string", "description": "Tab type", "example": "signature"}}, "required_tables": ["tabs"], "required_fields": {"tabs": ["id", "envelope_id", "recipient_id", "tab_type", "label", "required", "anchor_text", "anchor_offset_x", "anchor_offset_y", "max_length", "default_value", "checked", "group_id"]}}, {"path": "/api/envelopes/{envelope_id}/status", "method": "PUT", "summary": "Update (Send) envelope status", "description": "Set envelope status (e.g., Sent, Delivered, Completed, etc.), send envelope, set timestamps and reminders.", "operation_id": "send_envelope", "tags": ["envelopes"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 20}, "status": {"type": "string", "param_type": "body", "required": true, "description": "Status to set", "example": "Sent"}, "sent_at": {"type": "string", "param_type": "body", "required": false, "description": "Timestamp when envelope is sent (ISO8601)", "example": "2026-02-01T09:00:00Z"}, "reminder_enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Enable reminders", "example": true}, "reminder_interval_days": {"type": "integer", "param_type": "body", "required": false, "description": "Reminder interval (days)", "example": 2}, "reminder_next_at": {"type": "string", "param_type": "body", "required": false, "description": "Next reminder timestamp", "example": "2026-02-03T09:00:00Z"}, "expires_at": {"type": "string", "param_type": "body", "required": false, "description": "Envelope expiration date/time", "example": "2026-02-11T23:59:59Z"}}, "response": {"envelope_id": {"type": "integer", "description": "Envelope ID", "example": 20}, "status": {"type": "string", "description": "Envelope status after update", "example": "Sent"}, "sent_at": {"type": "string", "description": "Timestamp when envelope was sent", "example": "2026-02-01T09:00:00Z"}}, "required_tables": ["envelopes"], "required_fields": {"envelopes": ["id", "status", "sent_at", "reminder_enabled", "reminder_interval_days", "reminder_next_at", "expires_at"]}}, {"path": "/api/envelopes", "method": "GET", "summary": "Find envelopes by status and recipient email", "description": "Search for envelopes with given status and recipient email, sorted by sent_at descending.", "operation_id": "search_envelopes_by_recipient_and_status", "tags": ["envelopes"], "request_params": {"status": {"type": "string", "param_type": "query", "required": true, "description": "Envelope status to filter", "example": "Delivered"}, "recipient_email": {"type": "string", "param_type": "query", "required": true, "description": "Recipient email to filter", "example": "maria.chen@example.com"}}, "response": {"envelopes": {"type": "array", "items": {"envelope_id": {"type": "integer", "description": "Envelope ID", "example": 90}, "subject": {"type": "string", "description": "Envelope subject", "example": "Offer Letter - Jordan Lee"}, "sent_at": {"type": "string", "description": "Envelope sent timestamp", "example": "2026-01-03T08:00:00Z"}, "status": {"type": "string", "description": "Status", "example": "Delivered"}}}}, "required_tables": ["envelopes", "envelope_recipients"], "required_fields": {"envelopes": ["id", "subject", "sent_at", "status"], "envelope_recipients": ["email", "status"]}}, {"path": "/api/envelopes/{envelope_id}/audit_events", "method": "GET", "summary": "Get audit event timestamps for envelope", "description": "Get envelope audit events for sent and delivered timestamps for recipient(s).", "operation_id": "get_envelope_audit_timestamps", "tags": ["audit_events"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 90}, "recipient_email": {"type": "string", "param_type": "query", "required": false, "description": "Filter by recipient email", "example": "maria.chen@example.com"}}, "response": {"audit_events": {"type": "array", "items": {"event_type": {"type": "string", "description": "Type of event", "example": "delivered"}, "event_at": {"type": "string", "description": "Timestamp for event", "example": "2026-01-03T14:00:00Z"}, "recipient_id": {"type": "integer", "description": "Recipient ID", "example": 242}}}}, "required_tables": ["audit_events"], "required_fields": {"audit_events": ["envelope_id", "event_type", "event_at", "recipient_id"]}}, {"path": "/api/envelopes/{envelope_id}/void", "method": "PUT", "summary": "Void an envelope", "description": "Set envelope status to Voided and specify the void reason.", "operation_id": "void_envelope", "tags": ["envelopes"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 12}, "void_reason": {"type": "string", "param_type": "body", "required": true, "description": "Reason for voiding", "example": "Customer requested revised pricing; canceling current draft."}}, "response": {"envelope_id": {"type": "integer", "description": "Envelope ID", "example": 12}, "status": {"type": "string", "description": "Envelope status", "example": "Voided"}, "void_reason": {"type": "string", "description": "Reason for voiding", "example": "Customer requested revised pricing; canceling current draft."}, "voided_at": {"type": "string", "description": "Timestamp envelope was voided", "example": "2026-03-01T11:00:00Z"}}, "required_tables": ["envelopes"], "required_fields": {"envelopes": ["id", "status", "void_reason", "voided_at"]}}]}, {"group_name": "Templates", "endpoints": [{"path": "/api/reusable_tabs", "method": "POST", "summary": "Create a reusable tab definition", "description": "Create a new reusable tab (field, e.g. text input or checkbox) for later addition to templates.", "operation_id": "create_reusable_tab", "tags": ["reusable_tabs"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Reusable tab name", "example": "Client Legal Name"}, "tab_type": {"type": "string", "param_type": "body", "required": true, "description": "Type of tab", "example": "text"}, "required": {"type": "boolean", "param_type": "body", "required": true, "description": "Is field required", "example": true}, "max_length": {"type": "integer", "param_type": "body", "required": false, "description": "Max length for text input", "example": 80}, "default_value": {"type": "string", "param_type": "body", "required": false, "description": "Default value", "example": ""}}, "response": {"reusable_tab_id": {"type": "integer", "description": "Reusable tab ID", "example": 21}, "name": {"type": "string", "description": "Tab name", "example": "Client Legal Name"}, "tab_type": {"type": "string", "description": "Tab type", "example": "text"}, "required": {"type": "boolean", "description": "Is field required", "example": true}, "max_length": {"type": "integer", "description": "Max length for field", "example": 80}, "default_value": {"type": "string", "description": "Default value", "example": ""}}, "required_tables": ["reusable_tabs"], "required_fields": {"reusable_tabs": ["id", "name", "tab_type", "required", "max_length", "default_value", "owner_user_id"]}}, {"path": "/api/templates/{template_id}/template_tabs", "method": "POST", "summary": "Add a reusable tab to a template", "description": "Add a reusable tab to a template at specified anchor text with offset.", "operation_id": "add_reusable_tab_to_template", "tags": ["template_tabs"], "request_params": {"template_id": {"type": "integer", "param_type": "path", "required": true, "description": "Template ID", "example": 5}, "role_id": {"type": "integer", "param_type": "body", "required": true, "description": "Template role ID", "example": 22}, "reusable_tab_id": {"type": "integer", "param_type": "body", "required": true, "description": "Reusable tab to attach", "example": 21}, "anchor_text": {"type": "string", "param_type": "body", "required": true, "description": "Anchor text for placement", "example": "/CLIENT_LEGAL_NAME/"}, "anchor_offset_x": {"type": "integer", "param_type": "body", "required": false, "description": "X offset", "example": 10}, "anchor_offset_y": {"type": "integer", "param_type": "body", "required": false, "description": "Y offset", "example": 0}}, "response": {"template_tab_id": {"type": "integer", "description": "Template tab ID", "example": 172}, "template_id": {"type": "integer", "description": "Template ID", "example": 5}, "role_id": {"type": "integer", "description": "Role ID", "example": 22}, "reusable_tab_id": {"type": "integer", "description": "Reusable tab ID", "example": 21}, "anchor_text": {"type": "string", "description": "Anchor text", "example": "/CLIENT_LEGAL_NAME/"}}, "required_tables": ["template_tabs"], "required_fields": {"template_tabs": ["id", "template_id", "role_id", "reusable_tab_id", "anchor_text", "anchor_offset_x", "anchor_offset_y"]}}, {"path": "/api/templates/{template_id}/template_tab_groups", "method": "POST", "summary": "Create a checkbox group for a template role", "description": "Create a checkbox group for a template, assign to a template role, used for option selection.", "operation_id": "create_template_checkbox_group", "tags": ["template_tab_groups"], "request_params": {"template_id": {"type": "integer", "param_type": "path", "required": true, "description": "Template ID", "example": 6}, "role_id": {"type": "integer", "param_type": "body", "required": true, "description": "Role ID within template", "example": 34}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Group name", "example": "Optional Add-ons"}, "group_type": {"type": "string", "param_type": "body", "required": true, "description": "Type (always checkbox_group)", "example": "checkbox_group"}}, "response": {"tab_group_id": {"type": "integer", "description": "Unique tab group ID", "example": 401}, "template_id": {"type": "integer", "description": "Template ID", "example": 6}, "role_id": {"type": "integer", "description": "Role ID", "example": 34}, "name": {"type": "string", "description": "Group name", "example": "Optional Add-ons"}, "group_type": {"type": "string", "description": "Type of group", "example": "checkbox_group"}}, "required_tables": ["template_tab_groups"], "required_fields": {"template_tab_groups": ["id", "template_id", "role_id", "name", "group_type"]}}, {"path": "/api/templates/{template_id}/template_tabs", "method": "POST", "summary": "Add checkbox options to a group in template", "description": "Add checkbox tab options to checkbox group in template, assign to role and set default checked.", "operation_id": "add_template_tab_to_group", "tags": ["template_tabs"], "request_params": {"template_id": {"type": "integer", "param_type": "path", "required": true, "description": "Template ID", "example": 6}, "role_id": {"type": "integer", "param_type": "body", "required": true, "description": "Template role ID", "example": 34}, "group_id": {"type": "integer", "param_type": "body", "required": true, "description": "Checkbox group ID", "example": 401}, "tab_type": {"type": "string", "param_type": "body", "required": true, "description": "Type (checkbox)", "example": "checkbox"}, "label": {"type": "string", "param_type": "body", "required": true, "description": "Checkbox option label", "example": "Premium Support"}, "checked": {"type": "boolean", "param_type": "body", "required": false, "description": "Default checked state", "example": false}}, "response": {"template_tab_id": {"type": "integer", "description": "Template tab ID", "example": 183}, "group_id": {"type": "integer", "description": "Checkbox group ID", "example": 401}, "label": {"type": "string", "description": "Checkbox label", "example": "Premium Support"}, "checked": {"type": "boolean", "description": "Default checked state", "example": false}}, "required_tables": ["template_tabs"], "required_fields": {"template_tabs": ["id", "template_id", "role_id", "group_id", "tab_type", "label", "checked"]}}]}, {"group_name": "User Groups & Permissions", "endpoints": [{"path": "/api/user_groups", "method": "POST", "summary": "Create a new user group with permission set", "description": "Create a new user group with assigned permission set.", "operation_id": "create_user_group", "tags": ["user_groups"], "request_params": {"name": {"type": "string", "param_type": "body", "required": true, "description": "Group name", "example": "APAC Sales"}, "permission_set_id": {"type": "integer", "param_type": "body", "required": true, "description": "Permission set ID", "example": 3}}, "response": {"group_id": {"type": "integer", "description": "User group ID", "example": 52}, "name": {"type": "string", "description": "Group name", "example": "APAC Sales"}, "permission_set_id": {"type": "integer", "description": "Permission set ID", "example": 3}}, "required_tables": ["user_groups"], "required_fields": {"user_groups": ["id", "name", "permission_set_id", "owner_user_id"]}}, {"path": "/api/group_members", "method": "POST", "summary": "Add users to a user group", "description": "Add one or more users (by email) to an existing user group.", "operation_id": "add_users_to_group", "tags": ["group_members"], "request_params": {"group_id": {"type": "integer", "param_type": "body", "required": true, "description": "User group ID", "example": 52}, "user_emails": {"type": "array", "param_type": "body", "required": true, "description": "List of user emails to add", "example": ["sana.watanabe@example.com", "li.wei@example.com"]}}, "response": {"added_members": {"type": "array", "items": {"user_id": {"type": "integer", "description": "User ID", "example": 17}, "email": {"type": "string", "description": "User email", "example": "li.wei@example.com"}, "group_id": {"type": "integer", "description": "User group ID", "example": 52}}}}, "required_tables": ["users", "group_members"], "required_fields": {"users": ["id", "email"], "group_members": ["group_id", "user_id"]}}]}, {"group_name": "Connect Webhooks", "endpoints": [{"path": "/api/connect_subscriptions", "method": "POST", "summary": "Create a webhook subscription for envelope events", "description": "Create a subscription that posts envelope JSON events to a given endpoint URL.", "operation_id": "create_connect_subscription", "tags": ["connect_subscriptions"], "request_params": {"name": {"type": "string", "param_type": "body", "required": false, "description": "Subscription name", "example": "Envelope Events"}, "endpoint_url": {"type": "string", "param_type": "body", "required": true, "description": "Webhook POST endpoint", "example": "https://webhook.example.com/docusign/events"}, "content_type": {"type": "string", "param_type": "body", "required": false, "description": "Payload content type", "example": "application/json"}, "enabled": {"type": "boolean", "param_type": "body", "required": false, "description": "Enable subscription", "example": true}, "include_recipient_status": {"type": "boolean", "param_type": "body", "required": false, "description": "Include recipient status in payload", "example": true}, "include_document_status": {"type": "boolean", "param_type": "body", "required": false, "description": "Include document status in payload", "example": true}}, "response": {"subscription_id": {"type": "integer", "description": "Subscription ID", "example": 82}, "endpoint_url": {"type": "string", "description": "Webhook endpoint URL", "example": "https://webhook.example.com/docusign/events"}, "enabled": {"type": "boolean", "description": "Is enabled", "example": true}, "include_recipient_status": {"type": "boolean", "description": "Includes recipient status", "example": true}, "include_document_status": {"type": "boolean", "description": "Includes document status", "example": true}}, "required_tables": ["connect_subscriptions"], "required_fields": {"connect_subscriptions": ["id", "endpoint_url", "content_type", "enabled", "include_recipient_status", "include_document_status", "owner_user_id"]}}, {"path": "/api/connect_subscriptions/{subscription_id}/events", "method": "POST", "summary": "Add event types to a webhook subscription", "description": "Specify which envelope event types trigger the webhook subscription.", "operation_id": "add_events_to_connect_subscription", "tags": ["connect_subscription_events"], "request_params": {"subscription_id": {"type": "integer", "param_type": "path", "required": true, "description": "Connect subscription ID", "example": 82}, "event_types": {"type": "array", "param_type": "body", "required": true, "description": "Envelope event type(s)", "example": ["sent", "delivered", "completed", "declined", "voided"]}}, "response": {"subscription_id": {"type": "integer", "description": "Connect subscription ID", "example": 82}, "events": {"type": "array", "items": {"event_type": {"type": "string", "description": "Envelope event type", "example": "sent"}}}}, "required_tables": ["connect_subscription_events"], "required_fields": {"connect_subscription_events": ["subscription_id", "event_type"]}}]}, {"group_name": "Simulation & Artifacts", "endpoints": [{"path": "/api/envelopes/simulate", "method": "POST", "summary": "Create a metadata-only envelope in simulation mode", "description": "Create an envelope with no actual document, used for workflow simulation and testing.", "operation_id": "create_envelope_simulation", "tags": ["envelopes", "simulation"], "request_params": {"title": {"type": "string", "param_type": "body", "required": true, "description": "Envelope title", "example": "Employee Handbook Acknowledgement - Feb 2026"}, "status": {"type": "string", "param_type": "body", "required": true, "description": "Envelope initial status", "example": "Created"}, "source_type": {"type": "string", "param_type": "body", "required": true, "description": "Source type", "example": "api_simulation"}}, "response": {"envelope_id": {"type": "integer", "description": "Envelope ID", "example": 2017}, "title": {"type": "string", "description": "Envelope title", "example": "Employee Handbook Acknowledgement - Feb 2026"}, "status": {"type": "string", "description": "Envelope status", "example": "Created"}, "source_type": {"type": "string", "description": "Source type", "example": "api_simulation"}}, "required_tables": ["envelopes"], "required_fields": {"envelopes": ["id", "title", "status", "source_type", "owner_user_id"]}}, {"path": "/api/envelopes/{envelope_id}/recipients", "method": "POST", "summary": "Add recipients to simulated envelope", "description": "Add recipients to metadata-only envelope for workflow simulation", "operation_id": "add_simulation_envelope_recipient", "tags": ["simulation", "envelope_recipients"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 2017}, "role": {"type": "string", "param_type": "body", "required": true, "description": "Recipient role", "example": "Signer"}, "name": {"type": "string", "param_type": "body", "required": true, "description": "Recipient name", "example": "Priya Shah"}, "email": {"type": "string", "param_type": "body", "required": true, "description": "Recipient email", "example": "priya.shah@example.com"}}, "response": {"recipient_id": {"type": "integer", "description": "Recipient ID", "example": 1802}, "envelope_id": {"type": "integer", "description": "Envelope ID", "example": 2017}, "role": {"type": "string", "description": "Recipient role", "example": "Signer"}, "email": {"type": "string", "description": "Recipient email", "example": "priya.shah@example.com"}}, "required_tables": ["envelope_recipients"], "required_fields": {"envelope_recipients": ["id", "envelope_id", "role", "name", "email"]}}, {"path": "/api/envelopes/{envelope_id}/tabs", "method": "POST", "summary": "Add simulation workflow tabs", "description": "Add tabs like signature and date signed to simulated envelope and recipient.", "operation_id": "add_simulation_envelope_tabs", "tags": ["simulation", "tabs"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 2017}, "recipient_id": {"type": "integer", "param_type": "body", "required": true, "description": "Recipient ID", "example": 1802}, "tab_type": {"type": "string", "param_type": "body", "required": true, "description": "Tab type", "example": "signature"}, "label": {"type": "string", "param_type": "body", "required": false, "description": "Tab label", "example": "Employee Signature"}}, "response": {"tab_id": {"type": "integer", "description": "Tab ID", "example": 1500}, "tab_type": {"type": "string", "description": "Tab type", "example": "signature"}, "label": {"type": "string", "description": "Tab label", "example": "Employee Signature"}}, "required_tables": ["tabs"], "required_fields": {"tabs": ["id", "envelope_id", "recipient_id", "tab_type", "label"]}}, {"path": "/api/envelopes/{envelope_id}/status", "method": "PUT", "summary": "Transition simulated envelope status", "description": "Change simulated envelope workflow status (Sent, Delivered, Signed, Completed).", "operation_id": "simulate_envelope_status_transition", "tags": ["simulation", "envelopes"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 2017}, "status": {"type": "string", "param_type": "body", "required": true, "description": "Envelope status to set", "example": "Completed"}}, "response": {"envelope_id": {"type": "integer", "description": "Envelope ID", "example": 2017}, "status": {"type": "string", "description": "New envelope status", "example": "Completed"}}, "required_tables": ["envelopes"], "required_fields": {"envelopes": ["id", "status"]}}, {"path": "/api/envelopes/{envelope_id}/artifacts", "method": "GET", "summary": "Get envelope completion artifacts", "description": "Fetch completion certificate and final audit log for completed envelope workflow.", "operation_id": "get_envelope_artifacts", "tags": ["artifacts"], "request_params": {"envelope_id": {"type": "integer", "param_type": "path", "required": true, "description": "Envelope ID", "example": 2017}}, "response": {"certificate_id": {"type": "string", "description": "Completion certificate ID", "example": "5507a7-certificate"}, "final_audit_log": {"type": "string", "description": "Final audit log (base64 or JSON)", "example": "<base64_auditlog>"}}, "required_tables": ["envelope_artifacts"], "required_fields": {"envelope_artifacts": ["envelope_id", "artifact_type", "certificate_id", "content_blob"]}}]}]}}
